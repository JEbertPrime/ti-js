var ti=function(t){var e={};function n(r){if(e[r])return e[r].exports;var u=e[r]={i:r,l:!1,exports:{}};return t[r].call(u.exports,u,u.exports,n),u.l=!0,u.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var u in t)n.d(r,u,function(e){return t[e]}.bind(null,u));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";n.r(e),n.d(e,"NUMBER",(function(){return r})),n.d(e,"BINARY",(function(){return u})),n.d(e,"UNARY",(function(){return o})),n.d(e,"VARIABLE",(function(){return i})),n.d(e,"STRING",(function(){return a})),n.d(e,"ANS",(function(){return c})),n.d(e,"ValueStatement",(function(){return s})),n.d(e,"AssignmentStatement",(function(){return l})),n.d(e,"IfStatement",(function(){return f})),n.d(e,"Display",(function(){return p})),n.d(e,"ThenStatement",(function(){return d})),n.d(e,"ElseStatement",(function(){return b})),n.d(e,"ForLoop",(function(){return m})),n.d(e,"WhileLoop",(function(){return h})),n.d(e,"RepeatLoop",(function(){return v})),n.d(e,"EndStatement",(function(){return S})),n.d(e,"PauseStatement",(function(){return y})),n.d(e,"LabelStatement",(function(){return k})),n.d(e,"GotoStatement",(function(){return g})),n.d(e,"IncrementSkip",(function(){return A})),n.d(e,"DecrementSkip",(function(){return E})),n.d(e,"MenuStatement",(function(){return R})),n.d(e,"ProgramStatement",(function(){return x})),n.d(e,"ReturnStatement",(function(){return L})),n.d(e,"StopStatement",(function(){return w})),n.d(e,"DelVarStatement",(function(){return T})),n.d(e,"GraphStyleStatement",(function(){return N})),n.d(e,"OpenLibStatement",(function(){return M})),n.d(e,"ExecLibStatement",(function(){return I})),n.d(e,"Prompt",(function(){return B})),n.d(e,"SyntaxError",(function(){return P}));const r="number",u="binary",o="unary",i="variable",a="string",c="ans",s="value",l="assign",f="if",p="display",d="ThenStatement",b="ElseStatement",m="ForLoop",h="WhileLoop",v="RepeatLoop",S="EndStatement",y="PauseStatement",k="LabelStatement",g="GotoStatement",A="IncrementSkip",E="DecrementSkip",R="MenuStatement",x="ProgramStatement",L="ReturnStatement",w="StopStatement",T="DelVarStatement",N="GraphStyleStatement",M="OpenLibStatement",I="ExecLibStatement",B="Prompt",P="SyntaxError"},function(t,e,n){"use strict";function r(t,e,n,u){this.message=t,this.expected=e,this.found=n,this.location=u,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}!function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(r,Error),r.buildMessage=function(t,e){var n={literal:function(t){return'"'+u(t.text)+'"'},class:function(t){var e=t.parts.map((function(t){return Array.isArray(t)?o(t[0])+"-"+o(t[1]):o(t)}));return"["+(t.inverted?"^":"")+e+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description},not:function(t){return"not "+i(t.expected)}};function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function u(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}function i(t){return n[t.type](t)}return"Expected "+function(t){var e,n,r=t.map(i);if(r.sort(),r.length>0){for(e=1,n=1;e<r.length;e++)r[e-1]!==r[e]&&(r[n]=r[e],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(t)+" but "+function(t){return t?'"'+u(t)+'"':"end of input"}(e)+" found."},t.exports={SyntaxError:r,parse:function(t,e){e=void 0!==e?e:{};var u,o={},i={Start:Oe},a=Oe,c="&theta",s=".",l="&E",f='"',p="Ans",d=")",b="(",m="-",h="*",v="/",S="+",y="=",k="!=",g=">=",A=">",E="<=",R="<",x="->",L="If ",w="Then",T="Else",N="For(",M=",",I="While ",B="Repeat ",P="End",C="Pause",D="Lbl ",F="Goto ",U="IS>(",O="DS<(",$="Menu(",G="prgm",Y="Return",H="Stop",V="DelVar",W="GraphStyle(",j="OpenLib(",X="ExecLib(",_="Prompt ",Z="Disp ",q=/^[A-Z0-9]/,J=/^[A-Z]/,K=/^[0-9]/,Q=/^[+\-]/,z=/^[^"]/,tt=Be([["A","Z"],["0","9"]],!1,!1),et=Be([["A","Z"]],!1,!1),nt=Ie("&theta",!1),rt=Ie(".",!1),ut=Be([["0","9"]],!1,!1),ot=Ie("&E",!1),it=Be(["+","-"],!1,!1),at=Be(['"'],!0,!1),ct=Ie('"',!1),st=Ie("Ans",!1),lt=Ie(")",!1),ft=Ie("(",!1),pt=Ie("-",!1),dt=Ie("*",!1),bt=Ie("/",!1),mt=Ie("+",!1),ht=Ie("=",!1),vt=Ie("!=",!1),St=Ie(">=",!1),yt=Ie(">",!1),kt=Ie("<=",!1),gt=Ie("<",!1),At=Ie("->",!1),Et=Ie("If ",!1),Rt=Ie("Then",!1),xt=Ie("Else",!1),Lt=Ie("For(",!1),wt=Ie(",",!1),Tt=Ie("While ",!1),Nt=Ie("Repeat ",!1),Mt=Ie("End",!1),It=Ie("Pause",!1),Bt=Ie("Lbl ",!1),Pt=Ie("Goto ",!1),Ct=Ie("IS>(",!1),Dt=Ie("DS<(",!1),Ft=Ie("Menu(",!1),Ut=Ie("prgm",!1),Ot=Ie("Return",!1),$t=Ie("Stop",!1),Gt=Ie("DelVar",!1),Yt=Ie("GraphStyle(",!1),Ht=Ie("OpenLib(",!1),Vt=Ie("ExecLib(",!1),Wt=Ie("Prompt ",!1),jt=Ie("Disp ",!1),Xt=function(){return t.substring(we,Le)},_t=function(){return"THETA"},Zt=function(t){return{type:en.VARIABLE,name:t}},qt=function(t,e,n){return{type:en.NUMBER,integer:t,fraction:e,exponent:n}},Jt=function(t,e){return{type:en.NUMBER,fraction:t,exponent:e}},Kt=function(t,e){return{type:en.NUMBER,integer:t,exponent:e}},Qt=function(t){return{type:en.STRING,chars:t}},zt=function(){return{type:en.ANS}},te=function(t,e){return{type:en.UNARY,operator:t,argument:e}},ee=function(t,e){return nn.buildBinaryExpression(t,e)},ne=function(t){return{type:en.ValueStatement,value:t}},re=function(t,e){return{type:en.AssignmentStatement,value:t,variable:e}},ue=function(t){return{type:en.IfStatement,value:t}},oe=function(){return{type:en.ThenStatement}},ie=function(){return{type:en.ElseStatement}},ae=function(t,e,n,r){return{type:en.ForLoop,variable:t,start:e,end:n,step:r}},ce=function(t){return{type:en.WhileLoop,value:t}},se=function(t){return{type:en.RepeatLoop,value:t}},le=function(){return{type:en.EndStatement}},fe=function(){return{type:en.PauseStatement}},pe=function(t){return{type:en.LabelStatement,location:t}},de=function(t){return{type:en.GotoStatement,location:t}},be=function(t,e){return{type:en.IncrementSkip,variable:t,end:e}},me=function(t,e){return{type:en.DecrementSkip,variable:t,end:e}},he=function(){return{type:en.MenuStatement}},ve=function(){return{type:en.ProgramStatement}},Se=function(){return{type:en.ReturnStatement}},ye=function(){return{type:en.StopStatement}},ke=function(){return{type:en.DelVarStatement}},ge=function(){return{type:en.GraphStyleStatement}},Ae=function(){return{type:en.OpenLibStatement}},Ee=function(){return{type:en.ExecLibStatement}},Re=function(t){return{type:en.Prompt,variable:t}},xe=function(t){return{type:en.Display,value:t}},Le=0,we=0,Te=[{line:1,column:1}],Ne=[],Me=0;if("startRule"in e){if(!(e.startRule in i))throw new Error("Can't start parsing from rule \""+e.startRule+'".');a=i[e.startRule]}function Ie(t,e){return{type:"literal",text:t,ignoreCase:e}}function Be(t,e,n){return{type:"class",parts:t,inverted:e,ignoreCase:n}}function Pe(e){var n,r=Te[e];if(r)return r;for(n=e-1;!Te[n];)n--;for(r={line:(r=Te[n]).line,column:r.column};n<e;)10===t.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return Te[e]=r,r}var Ce="string"==typeof e.filename&&e.filename.length>0;function De(t,n){var r={};Ce&&(r.filename=e.filename);var u=Pe(t);r.start={offset:t,line:u.line,column:u.column};var o=Pe(n);return r.end={offset:n,line:o.line,column:o.column},r}function Fe(t){var e=Ne[Ne.length-1];Le<e.pos||(Le>e.pos&&(e.pos=Le,e.variants=[]),e.variants.push(t))}function Ue(t,e,n){return new r(r.buildMessage(t,e),t,e,n)}function Oe(){return function(){var e;(e=function(){var e,n,r,u;e=Le,(n=tn())!==o?(!function(t){0===Me&&Fe(t)}(At),t.substr(Le,2)===x?(r=x,Le+=2):r=o,r!==o&&(u=Ge())!==o?(we=e,e=re(n,u)):(Le=e,e=o)):(Le=e,e=o);return e}())===o&&(e=function(){var e;(e=function(){var e,n,r;e=Le,function(t){0===Me&&Fe(t)}(Et),t.substr(Le,3)===L?(n=L,Le+=3):n=o;n!==o&&(r=tn())!==o?(we=e,e=ue(r)):(Le=e,e=o);return e}())===o&&(e=function(){var e,n;e=Le,function(t){0===Me&&Fe(t)}(Rt),t.substr(Le,4)===w?(n=w,Le+=4):n=o;n!==o&&(we=e,n=oe());return e=n}())===o&&(e=function(){var e,n;e=Le,function(t){0===Me&&Fe(t)}(xt),t.substr(Le,4)===T?(n=T,Le+=4):n=o;n!==o&&(we=e,n=ie());return e=n}())===o&&(e=function(){var e,n,r,u,i,a,c,s,l,f=function(t){0===Me&&Fe(t)};e=Le,f(Lt),t.substr(Le,4)===N?(n=N,Le+=4):n=o;n!==o&&(r=Ge())!==o?(f(wt),44===t.charCodeAt(Le)?(u=M,Le++):u=o,u!==o&&(i=tn())!==o?(f(wt),44===t.charCodeAt(Le)?(a=M,Le++):a=o,a!==o&&(c=tn())!==o?(f(wt),44===t.charCodeAt(Le)?(s=M,Le++):s=o,s!==o&&(l=tn())!==o?(Xe(),we=e,e=ae(r,i,c,l)):(Le=e,e=o)):(Le=e,e=o)):(Le=e,e=o)):(Le=e,e=o);return e}())===o&&(e=function(){var e,n,r;e=Le,function(t){0===Me&&Fe(t)}(Tt),t.substr(Le,6)===I?(n=I,Le+=6):n=o;n!==o&&(r=tn())!==o?(we=e,e=ce(r)):(Le=e,e=o);return e}())===o&&(e=function(){var e,n,r;e=Le,function(t){0===Me&&Fe(t)}(Nt),t.substr(Le,7)===B?(n=B,Le+=7):n=o;n!==o&&(r=tn())!==o?(we=e,e=se(r)):(Le=e,e=o);return e}())===o&&(e=function(){var e,n;e=Le,function(t){0===Me&&Fe(t)}(Mt),t.substr(Le,3)===P?(n=P,Le+=3):n=o;n!==o&&(we=e,n=le());return e=n}())===o&&(e=function(){var e,n;e=Le,function(t){0===Me&&Fe(t)}(It),t.substr(Le,5)===C?(n=C,Le+=5):n=o;n!==o&&(we=e,n=fe());return e=n}())===o&&(e=function(){var e,n,r;e=Le,function(t){0===Me&&Fe(t)}(Bt),t.substr(Le,4)===D?(n=D,Le+=4):n=o;n!==o&&(r=$e())!==o?(we=e,e=pe(r)):(Le=e,e=o);return e}())===o&&(e=function(){var e,n,r;e=Le,function(t){0===Me&&Fe(t)}(Pt),t.substr(Le,5)===F?(n=F,Le+=5):n=o;n!==o&&(r=$e())!==o?(we=e,e=de(r)):(Le=e,e=o);return e}())===o&&(e=function(){var e,n,r,u,i,a=function(t){0===Me&&Fe(t)};e=Le,a(Ct),t.substr(Le,4)===U?(n=U,Le+=4):n=o;n!==o&&(r=Ge())!==o?(a(wt),44===t.charCodeAt(Le)?(u=M,Le++):u=o,u!==o&&(i=tn())!==o?(Xe(),we=e,e=be(r,i)):(Le=e,e=o)):(Le=e,e=o);return e}())===o&&(e=function(){var e,n,r,u,i,a=function(t){0===Me&&Fe(t)};e=Le,a(Dt),t.substr(Le,4)===O?(n=O,Le+=4):n=o;n!==o&&(r=Ge())!==o?(a(wt),44===t.charCodeAt(Le)?(u=M,Le++):u=o,u!==o&&(i=tn())!==o?(Xe(),we=e,e=me(r,i)):(Le=e,e=o)):(Le=e,e=o);return e}())===o&&(e=function(){var e,n;e=Le,function(t){0===Me&&Fe(t)}(Ft),t.substr(Le,5)===$?(n=$,Le+=5):n=o;n!==o&&(we=e,n=he());return e=n}())===o&&(e=function(){var e,n;e=Le,function(t){0===Me&&Fe(t)}(Ut),t.substr(Le,4)===G?(n=G,Le+=4):n=o;n!==o&&(we=e,n=ve());return e=n}())===o&&(e=function(){var e,n;e=Le,function(t){0===Me&&Fe(t)}(Ot),t.substr(Le,6)===Y?(n=Y,Le+=6):n=o;n!==o&&(we=e,n=Se());return e=n}())===o&&(e=function(){var e,n;e=Le,function(t){0===Me&&Fe(t)}($t),t.substr(Le,4)===H?(n=H,Le+=4):n=o;n!==o&&(we=e,n=ye());return e=n}())===o&&(e=function(){var e,n;e=Le,function(t){0===Me&&Fe(t)}(Gt),t.substr(Le,6)===V?(n=V,Le+=6):n=o;n!==o&&(we=e,n=ke());return e=n}())===o&&(e=function(){var e,n;e=Le,function(t){0===Me&&Fe(t)}(Yt),t.substr(Le,11)===W?(n=W,Le+=11):n=o;n!==o&&(we=e,n=ge());return e=n}())===o&&(e=function(){var e,n;e=Le,function(t){0===Me&&Fe(t)}(Ht),t.substr(Le,8)===j?(n=j,Le+=8):n=o;n!==o&&(we=e,n=Ae());return e=n}())===o&&(e=function(){var e,n;e=Le,function(t){0===Me&&Fe(t)}(Vt),t.substr(Le,8)===X?(n=X,Le+=8):n=o;n!==o&&(we=e,n=Ee());return e=n}());return e}())===o&&(e=function(){var e;(e=function(){var e,n,r;e=Le,function(t){0===Me&&Fe(t)}(Wt),t.substr(Le,7)===_?(n=_,Le+=7):n=o;n!==o&&(r=Ge())!==o?(we=e,e=Re(r)):(Le=e,e=o);return e}())===o&&(e=function(){var e,n,r;e=Le,function(t){0===Me&&Fe(t)}(jt),t.substr(Le,5)===Z?(n=Z,Le+=5):n=o;n!==o&&(r=tn())!==o?(we=e,e=xe(r)):(Le=e,e=o);return e}());return e}())===o&&(e=function(){var t,e;t=Le,(e=tn())!==o&&(we=t,e=ne(e));return t=e}());return e}()}function $e(){var e,n,r,u=function(t){0===Me&&Fe(t)};return e=Le,u(tt),q.test(t.charAt(Le))?(n=t.charAt(Le),Le++):n=o,n!==o?(u(tt),q.test(t.charAt(Le))?(r=t.charAt(Le),Le++):r=o,r===o&&(r=null),we=e,e=Xt()):(Le=e,e=o),e}function Ge(){var e,n;return e=Le,(n=function(){var e,n,r=function(t){0===Me&&Fe(t)};return r(et),J.test(t.charAt(Le))?(e=t.charAt(Le),Le++):e=o,e===o&&(e=Le,r(nt),t.substr(Le,6)===c?(n=c,Le+=6):n=o,n!==o&&(we=e,n=_t()),e=n),e}())!==o&&(we=e,n=Zt(n)),e=n}function Ye(){var e;return function(t){0===Me&&Fe(t)}(ut),K.test(t.charAt(Le))?(e=t.charAt(Le),Le++):e=o,e}function He(){var e,n,r;return e=Le,function(){var e;(function(t){0===Me&&Fe(t)})(ot),t.substr(Le,2)===l?(e=l,Le+=2):e=o;return e}()!==o?(n=Le,r=function(){var e,n,r,u;e=Le,n=Le,function(t){0===Me&&Fe(t)}(it),Q.test(t.charAt(Le))?(r=t.charAt(Le),Le++):r=o;r===o&&(r=null);(u=Ve())!==o?n=r=[r,u]:(Le=n,n=o);e=n!==o?t.substring(e,Le):n;return e}(),(n=r!==o?t.substring(n,Le):r)!==o?e=n:(Le=e,e=o)):(Le=e,e=o),e}function Ve(){var e,n,r;if(e=Le,n=[],(r=Ye())!==o)for(;r!==o;)n.push(r),r=Ye();else n=o;return e=n!==o?t.substring(e,Le):n}function We(){var e;return function(t){0===Me&&Fe(t)}(at),z.test(t.charAt(Le))?(e=t.charAt(Le),Le++):e=o,e}function je(){var e,n,r,u,i=function(t){0===Me&&Fe(t)};return e=Le,i(ct),34===t.charCodeAt(Le)?(n=f,Le++):n=o,n!==o?(r=function(){var e,n,r;for(e=Le,n=[],r=We();r!==o;)n.push(r),r=We();return e=t.substring(e,Le)}(),i(ct),34===t.charCodeAt(Le)?(u=f,Le++):u=o,u===o&&(u=null),we=e,e=Qt(r)):(Le=e,e=o),e}function Xe(){var e;return function(t){0===Me&&Fe(t)}(lt),41===t.charCodeAt(Le)?(e=d,Le++):e=o,e===o&&(e=null),e}function _e(){var e;return(e=function(){var e,n,r,u,i,a=function(t){0===Me&&Fe(t)};return e=Le,(n=Ve())!==o?(a(rt),46===t.charCodeAt(Le)?(r=s,Le++):r=o,r!==o?((u=Ve())===o&&(u=null),(i=He())===o&&(i=null),we=e,e=qt(n,u,i)):(Le=e,e=o)):(Le=e,e=o),e===o&&(e=Le,a(rt),46===t.charCodeAt(Le)?(n=s,Le++):n=o,n!==o&&(r=Ve())!==o?((u=He())===o&&(u=null),we=e,e=Jt(r,u)):(Le=e,e=o),e===o&&(e=Le,(n=Ve())!==o?((r=He())===o&&(r=null),we=e,e=Kt(n,r)):(Le=e,e=o))),e}())===o&&(e=function(){var e,n;return e=Le,function(t){0===Me&&Fe(t)}(st),t.substr(Le,3)===p?(n=p,Le+=3):n=o,n!==o&&(we=e,n=zt()),e=n}())===o&&(e=Ge())===o&&(e=je()),e}function Ze(){var e,n,r;return(e=function(){var e,n,r,u,i=function(t){0===Me&&Fe(t)};return(e=_e())===o&&(e=Le,i(ft),40===t.charCodeAt(Le)?(n=b,Le++):n=o,n!==o&&(r=tn())!==o?(i(lt),41===t.charCodeAt(Le)?(u=d,Le++):u=o,u!==o?e=r:(Le=e,e=o)):(Le=e,e=o)),e}())===o&&(e=Le,(n=function(){var e;return function(t){0===Me&&Fe(t)}(pt),45===t.charCodeAt(Le)?(e=m,Le++):e=o,e}())!==o&&(r=Ze())!==o?(we=e,e=te(n,r)):(Le=e,e=o)),e}function qe(){var e,n=function(t){0===Me&&Fe(t)};return n(dt),42===t.charCodeAt(Le)?(e=h,Le++):e=o,e===o&&(n(bt),47===t.charCodeAt(Le)?(e=v,Le++):e=o),e}function Je(){var t,e,n,r,u,i;if(t=Le,(e=Ze())!==o){for(n=[],r=Le,(u=qe())!==o&&(i=Ze())!==o?r=u=[u,i]:(Le=r,r=o);r!==o;)n.push(r),r=Le,(u=qe())!==o&&(i=Ze())!==o?r=u=[u,i]:(Le=r,r=o);we=t,t=ee(e,n)}else Le=t,t=o;return t}function Ke(){var e,n=function(t){0===Me&&Fe(t)};return n(mt),43===t.charCodeAt(Le)?(e=S,Le++):e=o,e===o&&(n(pt),45===t.charCodeAt(Le)?(e=m,Le++):e=o),e}function Qe(){var t,e,n,r,u,i;if(t=Le,(e=Je())!==o){for(n=[],r=Le,(u=Ke())!==o&&(i=Je())!==o?r=u=[u,i]:(Le=r,r=o);r!==o;)n.push(r),r=Le,(u=Ke())!==o&&(i=Je())!==o?r=u=[u,i]:(Le=r,r=o);we=t,t=ee(e,n)}else Le=t,t=o;return t}function ze(){var e,n=function(t){0===Me&&Fe(t)};return n(ht),61===t.charCodeAt(Le)?(e=y,Le++):e=o,e===o&&(n(vt),t.substr(Le,2)===k?(e=k,Le+=2):e=o,e===o&&(n(St),t.substr(Le,2)===g?(e=g,Le+=2):e=o,e===o&&(n(yt),62===t.charCodeAt(Le)?(e=A,Le++):e=o,e===o&&(n(kt),t.substr(Le,2)===E?(e=E,Le+=2):e=o,e===o&&(n(gt),60===t.charCodeAt(Le)?(e=R,Le++):e=o))))),e}function tn(){var t,e,n,r,u,i;if(t=Le,(e=Qe())!==o){for(n=[],r=Le,(u=ze())!==o&&(i=Qe())!==o?r=u=[u,i]:(Le=r,r=o);r!==o;)n.push(r),r=Le,(u=ze())!==o&&(i=Qe())!==o?r=u=[u,i]:(Le=r,r=o);we=t,t=ee(e,n)}else Le=t,t=o;return t}const en=n(0),nn=n(2);if(Ne.push({pos:Le,variants:[]}),(u=a())!==o&&Le===t.length)return u;throw u!==o&&Le<t.length&&Fe({type:"end"}),function(){var e=Ne[0],n=e.pos;return Ue(e.variants,n<t.length?t.charAt(n):null,n<t.length?De(n,n+1):De(n,n))}()}}},function(t,e,n){"use strict";n.r(e),n.d(e,"buildBinaryExpression",(function(){return u}));var r=n(0);function u(t,e){return e.reduce((function(t,e){return{type:r.BINARY,operator:e[0],left:t,right:e[1]}}),t)}},function(t,e,n){"use strict";n.r(e);const r="daemon-loop",u="daemon-exception",o=.001,i={},a=[];let c=!1,s=0;const l=1e3,f=document.createTextNode(null);function p(t){const e=new Event(t);f.dispatchEvent(e)}function d(){!1===c&&(c=!0,p("start"),window.postMessage(r,"*"))}function b(t,e,n){const r=s++;return console.debug(`[Task ${r}] Start`),i[r]={func:t,delay:Math.max(e,o),lastRun:void 0,runOnce:n,stopOnException:!0,suspended:!1},d(),r}function m(t){if(console.debug(`[Task ${t}] Suspend`),!(t in i))throw new Error(`Error suspending: task '${t}' not found`);i[t].suspended=!0}function h(t){console.debug(`[Task ${t}] Stop`),delete i[t]}function v(t){!function(t){if(console.debug(`[Task ${t}] Resume`),!(t in i))throw console.debug(i),new Error(`Error resuming: task '${t}' not found`);i[t].suspended=!1,d()}(t)}window.addEventListener("message",(function(t){if(t.source!==window||t.data!==r)return;t.stopPropagation();const e=performance.now(),n=Object.keys(i);let o=0,s=0;n.forEach(t=>{const n=i[t];let r;if(!0===n.suspended)r=0,s+=1;else if(o+=1,void 0===n.lastRun||n.runOnce)r=1;else{const t=e-n.lastRun;r=Math.floor(t/n.delay)}r>0&&(n.lastRun=e);for(let e=0;e<r;e++){let e;try{e=n.func()}catch(t){e=k,a.length<l&&(a.push(t),window.postMessage(u,"*"))}if(e===y||n.runOnce||n.stopOnException&&e===k){h(t),o-=1;break}if(e===g){m(t),o-=1,s+=1;break}if(e===S)break}}),0===o?(c=!1,p(s>0?"suspend":"stop")):window.postMessage(r,"*")}),!0),window.addEventListener("message",(function(t){if(t.source===window&&t.data===u&&a.length>0)throw a.pop()}),!0);const S="yield",y="done",k="faulted",g="suspend",A=f.addEventListener.bind(f);f.removeEventListener.bind(f);const E={stdout:t=>console.log(t),stderr:(t,e)=>console.log(t),liberr:(t,e)=>console.log(t),onStdin:t=>setTimeout(()=>t(prompt("Input?")),100),cleanup:()=>{}};function R(t,e={}){const n=(t,e)=>void 0===t?e:!0===t,r=n(e.includeErrors,!0),u=n(e.includeLineNumbers,!0),o=n(e.includeSource,!0),i=n(e.includeLibErrors,!0),a=e.input,c=(e,n=!0)=>setTimeout(()=>{let r=t.val()+e;n&&(r+="\n"),t.val(r)},0),s=(t,e)=>{let n=t;void 0!==e&&(void 0!==e.index&&u&&(n+=` on line ${e.index}`),void 0!==e.line&&o&&(n+=` :${e.line}`)),c(n)};return{stdout:c,stderr:r?s:E.stderr,liberr:i?s:E.stderr,onStdin:void 0!==a?t=>{setTimeout(()=>a.val(""),0),a.on("keypress",e=>{if(13===e.keyCode){a.off("keypress");const e=a.val();setTimeout(()=>a.val(""),0),t(e)}})}:E.onStdin,cleanup:()=>a.off("keypress")}}var x=n(0);function L(t,e,n=!1){return{type:t,code:e,hideSource:n}}function w(t=0){return{type:x.NUMBER,float:t}}const T=w(1),N=w(-1);function M(t){return t.type===x.NUMBER&&0!==F(t)}function I(t,e={}){let n=[];void 0!==e.source&&(n=Array.isArray(e.source)?e.source:e.source.split(/\r?\n/));let r=E;void 0!==e.io&&(r=e.io);let u=1;void 0!==e.frequencyMs&&(u=e.frequencyMs);const o={bus:{mem:{vars:{A:w(),B:w(),C:w(),D:w(),E:w(),F:w(),G:w(),H:w(),I:w(),J:w(),K:w(),L:w(),M:w(),N:w(),O:w(),P:w(),Q:w(),R:w(),S:w(),T:w(),U:w(),V:w(),W:w(),X:w(),Y:w(),Z:w(),THETA:w()},ans:w()},io:r,ctl:{resume:void 0,callback:void 0}},debug:!0===e.debug,sourceLines:n,searchLabel:void 0,ifResult:void 0,incrementDecrementResult:void 0,maximumLines:50,linesRun:0,blockStack:[],falsyStackHeight:void 0,falsyBlockPreviousIf:void 0,i:0,lines:t,callback:e.callback,frequencyMs:u,status:"pending"},i=(a=()=>(function(t){let e;try{t.status="running",e=function(t){if(t.debug&&console.debug(`Line: ${t.i}, \tsearchLabel: ${t.searchLabel||""}, \tifResult: ${t.ifResult||""}, \tblockStack: ${t.blockStack||""} \tfalsyStackHeight: ${t.falsyStackHeight||""}, \tfalsyBlockPreviousIf: ${t.falsyBlockPreviousIf||""}, \tsource: ${t.sourceLines[t.i]||""}`),t.i>=t.lines.length){if(void 0!==t.searchLabel)throw L("ti","LABEL");return t.debug&&console.debug(t.bus.mem),y}if(void 0!==t.bus.ctl.callback&&(t.bus.ctl.callback(),t.bus.ctl.callback=void 0),t.linesRun++,t.linesRun>=t.maximumLines)throw L("lib","maxlines");const e=t.lines[t.i],n=e.type;if(void 0!==t.falsyStackHeight){const e=t.blockStack[t.blockStack.length-1],r=t.lines[e];return(n===x.EndStatement||n===x.ElseStatement&&r.type===x.ThenStatement)&&(t.blockStack.pop(),t.blockStack.length<t.falsyStackHeight&&(t.falsyStackHeight=void 0)),(n===x.ForLoop||n===x.RepeatLoop||n===x.WhileLoop||n===x.ThenStatement&&!0===t.falsyBlockPreviousIf||n===x.ElseStatement&&r.type===x.ThenStatement)&&t.blockStack.push(t.i),void(t.falsyBlockPreviousIf=n===x.IfStatement)}if(t.falsyBlockPreviousIf=void 0,void 0!==t.searchLabel)return void(n===x.LabelStatement&&e.location===t.searchLabel&&(t.searchLabel=void 0));if(void 0!==t.ifResult){const e=!0!==t.ifResult;if(t.ifResult=void 0,n===x.ThenStatement)return t.blockStack.push(t.i),void(e&&(t.falsyStackHeight=t.blockStack.length));if(e)return}if(void 0!==t.incrementDecrementResult){const e=!0!==t.incrementDecrementResult;if(t.incrementDecrementResult=void 0,e)return}let r,u;switch(n){case x.IfStatement:t.ifResult=M(D(e.value,t.bus.mem));break;case x.ThenStatement:throw L("ti","SYNTAX");case x.ElseStatement:if(0===t.blockStack.length)throw L("ti","SYNTAX");if(t.lines[t.blockStack.pop()].type!==x.ThenStatement)throw L("ti","SYNTAX");t.blockStack.push(t.i),t.falsyStackHeight=t.blockStack.length;break;case x.ForLoop:B(t.bus.mem,e.variable.name,D(e.start,t.bus.mem)),t.blockStack.push(t.i),M(D(P(e.variable,"<=",e.end),t.bus.mem))||(t.falsyStackHeight=t.blockStack.length);break;case x.WhileLoop:t.blockStack.push(t.i),M(D(e.value,t.bus.mem))||(t.falsyStackHeight=t.blockStack.length);break;case x.RepeatLoop:t.blockStack.push(t.i);break;case x.EndStatement:if(0===t.blockStack.length)throw L("ti","SYNTAX");if(r=t.blockStack.pop(),(u=t.lines[r]).type===x.ForLoop||u.type===x.WhileLoop||u.type===x.RepeatLoop)u.type===x.ForLoop?(C(t.bus.mem,u.variable,u.step),M(D(P(u.variable,"<=",u.end),t.bus.mem))&&(t.blockStack.push(r),t.i=r)):M(D(u.value,t.bus.mem))&&(t.blockStack.push(r),t.i=r);else if(u.type!==x.ThenStatement&&u.type!==x.ElseStatement)throw L("lib",`impossibleEndFrom'${u.type}`);break;case x.PauseStatement:throw L("lib","unimplemented");case x.LabelStatement:break;case x.GotoStatement:t.searchLabel=e.location,t.i=-1;break;case x.IncrementSkip:C(t.bus.mem,e.variable,T),t.incrementDecrementResult=M(D(P(e.variable,"<=",e.end),t.bus.mem));break;case x.DecrementSkip:C(t.bus.mem,e.variable,N),t.incrementDecrementResult=M(D(P(e.variable,">=",e.end),t.bus.mem));break;case x.AssignmentStatement:B(t.bus.mem,e.variable.name,D(e.value,t.bus.mem));break;case x.Display:t.bus.io.stdout(function(t){let e="";switch(t.type){case x.NUMBER:(e=F(t).toString()).startsWith("0.")&&(e=e.substring(1));break;case x.STRING:e=t.chars;break;default:throw L("lib","unexpected value tostring")}return e}(D(e.value,t.bus.mem)));break;case x.Prompt:return t.bus.io.stdout(`${e.variable.name}=?`,!1),t.bus.io.onStdin(n=>t.bus.ctl.resume(()=>{if(null==n||""===n)throw t.bus.io.stdout(""),L("ti","SYNTAX",!0);t.bus.io.stdout(n),B(t.bus.mem,e.variable.name,w(parseFloat(n)))})),g;case x.ValueStatement:o=t.bus.mem,i=D(e.value,t.bus.mem),o.ans=i;break;case x.SyntaxError:throw L("ti","SYNTAX");default:throw L("lib","unexpected")}var o,i}(t)}catch(n){if(t.status="faulted",void 0===n.type)throw n;if(t.i<t.lines.length&&!0!==n.hideSource){let e=t.lines[t.i].source;void 0!==t.sourceLines&&(e=t.sourceLines[t.i]),n.source={index:t.i,line:e}}!function(t,e){"ti"===e.type?t.stderr(`ERR:${e.code}`,e.source):"lib"===e.type&&t.liberr(`Error: ${e.code}`,e.source)}(t.bus.io,n),e=y}return e===y?("faulted"!==t.status&&(t.status="done"),void 0!==t.callback&&setTimeout(t.callback,0)):t.i+=1,e})(o),c=o.frequencyMs,b(a,c));var a,c;return o.bus.ctl.resume=t=>{o.bus.ctl.callback=t,v(i)},{getStatus:()=>o.status,isActive:()=>"pending"===o.status||"running"===o.status,stop:()=>{r.cleanup(),function(t){h(t)}(i)}}}function B(t,e,n){n.type===x.NUMBER&&(t.vars[e]=n)}function P(t,e,n){return{type:x.BINARY,operator:e,left:t,right:n}}function C(t,e,n){B(t,e.name,D({type:x.BINARY,operator:"+",left:e,right:n},t))}function D(t,e){const n=t.type;if(n===x.NUMBER||n===x.STRING)return t;if(n===x.UNARY){const n=D(t.argument,e);if(n.type===x.NUMBER){const e=F(n);let r;switch(t.operator){case"-":r=-1*e;break;default:throw L("lib","unexpected numeric unary operator")}return{type:x.NUMBER,float:r}}}else if(n===x.BINARY){const n=D(t.left,e),r=D(t.right,e);if(n.type!==r.type)throw L("ti","DATA TYPE");if(n.type===x.NUMBER){const e=F(n),u=F(r);let o;switch(t.operator){case"+":o=e+u;break;case"-":o=e-u;break;case"*":o=e*u;break;case"/":o=e/u;break;case"=":o=e===u?1:0;break;case"!=":o=e!==u?1:0;break;case">=":o=e>=u?1:0;break;case">":o=e>u?1:0;break;case"<=":o=e<=u?1:0;break;case"<":o=e<u?1:0;break;default:throw L("lib","unexpected numeric binray operator")}return{type:x.NUMBER,float:o}}if(n.type===x.STRING){let e,u;switch(t.operator){case"+":e=n.chars+r.chars;break;case"=":u=n.chars===r.chars?1:0;break;case"!=":u=n.chars!==r.chars?1:0;break;default:throw L("lib","unexpected string binary operator")}if(void 0!==e)return{type:x.STRING,chars:e};if(void 0!==u)return{type:x.NUMBER,float:u};throw L("lib","unexpected string binary result")}}else{if(n===x.VARIABLE)return e.vars[t.name];if(n===x.ANS)return e.ans}throw L("lib","unexpected value")}function F(t){if(void 0!==t.float)return t.float;let e="";return void 0!==t.integer&&null!==t.integer&&(e+=t.integer),void 0!==t.fraction&&null!==t.fraction&&(e+="."+t.fraction),void 0!==t.exponent&&null!==t.exponent&&(e+="e"+t.exponent),parseFloat(e)}var U=n(1),O=n.n(U);function $(t,e={}){if(void 0===t)throw new Error("Undefined source!");const n=e.sourceMap||"inline";return t.split(/\r?\n/).map(t=>{let e;try{e=O.a.parse(t)}catch(t){if("SyntaxError"!==t.name)throw t;e={type:"SyntaxError"}}return"inline"===n&&(e.source=t),e})}n.d(e,"run",(function(){return I})),n.d(e,"on",(function(){return A})),n.d(e,"ioFromVal",(function(){return R})),n.d(e,"parse",(function(){return $}))}]);
//# sourceMappingURL=ti.js.map