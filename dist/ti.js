var ti=function(t){var n={};function e(r){if(n[r])return n[r].exports;var u=n[r]={i:r,l:!1,exports:{}};return t[r].call(u.exports,u,u.exports,e),u.l=!0,u.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var u in t)e.d(r,u,function(n){return t[n]}.bind(null,u));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=2)}([function(t,n,e){"use strict";e.r(n),e.d(n,"NUMBER",(function(){return r}));const r="number"},function(t,n,e){"use strict";function r(t,n,e,u){this.message=t,this.expected=n,this.found=e,this.location=u,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}!function(t,n){function e(){this.constructor=t}e.prototype=n.prototype,t.prototype=new e}(r,Error),r.buildMessage=function(t,n){var e={literal:function(t){return'"'+u(t.text)+'"'},class:function(t){var n=t.parts.map((function(t){return Array.isArray(t)?o(t[0])+"-"+o(t[1]):o(t)}));return"["+(t.inverted?"^":"")+n+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description},not:function(t){return"not "+i(t.expected)}};function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function u(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}function i(t){return e[t.type](t)}return"Expected "+function(t){var n,e,r=t.map(i);if(r.sort(),r.length>0){for(n=1,e=1;n<r.length;n++)r[n-1]!==r[n]&&(r[e]=r[n],e++);r.length=e}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(t)+" but "+function(t){return t?'"'+u(t)+'"':"end of input"}(n)+" found."},t.exports={SyntaxError:r,parse:function(t,n){n=void 0!==n?n:{};var u,o={},i={Start:Jn},c=Jn,a="&theta",s=".",f="&E",l='"',d="Ans",p=")",m="(",h="-",v="*",b="/",g="+",y="=",S="!=",k=">=",E=">",A="<=",w="<",L="->",x="If ",T="Then",R="Else",C="For(",D=",",P="While ",I="Repeat ",M="End",F="Pause",N="Lbl ",O="Goto ",$="IS>(",B="DS<(",H="Menu(",G="prgm",j="Return",q="Stop",U="DelVar",Y="GraphStyle(",W="OpenLib(",_="ExecLib(",X="Prompt ",V="Disp ",Z=/^[A-Z0-9]/,J=/^[A-Z]/,K=/^[0-9]/,Q=/^[+\-]/,z=/^[^"]/,tt=Yn([["A","Z"],["0","9"]],!1,!1),nt=Yn([["A","Z"]],!1,!1),et=Un("&theta",!1),rt=Un(".",!1),ut=Yn([["0","9"]],!1,!1),ot=Un("&E",!1),it=Yn(["+","-"],!1,!1),ct=Un('"',!1),at=Yn(['"'],!0,!1),st=Un("Ans",!1),ft=Un(")",!1),lt=Un("(",!1),dt=Un("-",!1),pt=Un("*",!1),mt=Un("/",!1),ht=Un("+",!1),vt=Un("=",!1),bt=Un("!=",!1),gt=Un(">=",!1),yt=Un(">",!1),St=Un("<=",!1),kt=Un("<",!1),Et=Un("->",!1),At=Un("If ",!1),wt=Un("Then",!1),Lt=Un("Else",!1),xt=Un("For(",!1),Tt=Un(",",!1),Rt=Un("While ",!1),Ct=Un("Repeat ",!1),Dt=Un("End",!1),Pt=Un("Pause",!1),It=Un("Lbl ",!1),Mt=Un("Goto ",!1),Ft=Un("IS>(",!1),Nt=Un("DS<(",!1),Ot=Un("Menu(",!1),$t=Un("prgm",!1),Bt=Un("Return",!1),Ht=Un("Stop",!1),Gt=Un("DelVar",!1),jt=Un("GraphStyle(",!1),qt=Un("OpenLib(",!1),Ut=Un("ExecLib(",!1),Yt=Un("Prompt ",!1),Wt=Un("Disp ",!1),_t=function(){return t.substring(Hn,Bn)},Xt=function(t){return Re+t},Vt=function(){return Re+"THETA"},Zt=function(t,n,e){return{type:fe.NUMBER,integer:Ie(t),fraction:Me(n),exponent:Ie(e)}},Jt=function(t,n){return{type:fe.NUMBER,fraction:Ie(t),exponent:Ie(n)}},Kt=function(t,n){return{type:fe.NUMBER,integer:Ie(t),exponent:Ie(n)}},Qt=function(t){return t},zt=function(t){return de+Ne(Fe(t))},tn=function(){return Ce},nn=function(t){return t},en=function(){return pe},rn=function(t,n){return t+Ne(n)},un=function(){return me},on=function(){return he},cn=function(t,n){return function(t,n){return n.reduce((function(t,n){return{type:"binary",operator:n[0],left:t,right:n[1]}}),t)}(t,n)},an=function(){return ge},sn=function(){return ye},fn=function(){return ke},ln=function(){return Se},dn=function(){return Ae},pn=function(){return Ee},mn=function(t){return $e("ValueStatement","statement",Oe(t,!0))},hn=function(t,n){return $e("Assignment","statement",Oe(le+Ne(n,t)))},vn=function(t){return $e("IfStatement","condition",Oe(t,!0))},bn=function(){return $e("ThenStatement")},gn=function(){return $e("ElseStatement")},yn=function(t,n,e,r){return $e("ForLoop","init",Oe(le+Ne(t,n)),"condition",Oe(Ae+Ne(t,e),!0),"step",Oe(le+Ne(t,ve+Ne(t,r))))},Sn=function(t){return $e("WhileLoop","condition",Oe(t,!0))},kn=function(t){return $e("RepeatLoop","condition",Oe(t,!0))},En=function(){return $e("EndStatement")},An=function(){return $e("PauseStatement")},wn=function(t){return $e("LabelStatement","label",Fe(t))},Ln=function(t){return $e("GotoStatement","label",Fe(t))},xn=function(t,n){return $e("IncrementSkip","increment",Oe(le+Ne(t,ve+Ne(t,Le))),"condition",Oe(Ae+Ne(t,n),!0))},Tn=function(t,n){return $e("DecrementSkip","decrement",Oe(le+Ne(t,be+Ne(t,Le))),"condition",Oe(ke+Ne(t,n),!0))},Rn=function(){return $e("MenuStatement")},Cn=function(){return $e("ProgramStatement")},Dn=function(){return $e("ReturnStatement")},Pn=function(){return $e("StopStatement")},In=function(){return $e("DelVarStatement")},Mn=function(){return $e("GraphStyleStatement")},Fn=function(){return $e("OpenLibStatement")},Nn=function(){return $e("ExecLibStatement")},On=function(t){return $e("IoStatement","statement",Oe(we+Ne(De,Pe,t)),"action",Fe("suspend"))},$n=function(t){return{type:"Display",value:t}},Bn=0,Hn=0,Gn=[{line:1,column:1}],jn=[],qn=0;if("startRule"in n){if(!(n.startRule in i))throw new Error("Can't start parsing from rule \""+n.startRule+'".');c=i[n.startRule]}function Un(t,n){return{type:"literal",text:t,ignoreCase:n}}function Yn(t,n,e){return{type:"class",parts:t,inverted:n,ignoreCase:e}}function Wn(n){var e,r=Gn[n];if(r)return r;for(e=n-1;!Gn[e];)e--;for(r={line:(r=Gn[e]).line,column:r.column};e<n;)10===t.charCodeAt(e)?(r.line++,r.column=1):r.column++,e++;return Gn[n]=r,r}var _n="string"==typeof n.filename&&n.filename.length>0;function Xn(t,e){var r={};_n&&(r.filename=n.filename);var u=Wn(t);r.start={offset:t,line:u.line,column:u.column};var o=Wn(e);return r.end={offset:e,line:o.line,column:o.column},r}function Vn(t){var n=jn[jn.length-1];Bn<n.pos||(Bn>n.pos&&(n.pos=Bn,n.variants=[]),n.variants.push(t))}function Zn(t,n,e){return new r(r.buildMessage(t,n),t,n,e)}function Jn(){return function(){var n;(n=function(){var n,e,r,u;n=Bn,(e=se())!==o?(!function(t){0===qn&&Vn(t)}(Et),t.substr(Bn,2)===L?(r=L,Bn+=2):r=o,r!==o&&(u=Qn())!==o?(Hn=n,n=hn(e,u)):(Bn=n,n=o)):(Bn=n,n=o);return n}())===o&&(n=function(){var n;(n=function(){var n,e,r;n=Bn,function(t){0===qn&&Vn(t)}(At),t.substr(Bn,3)===x?(e=x,Bn+=3):e=o;e!==o&&(r=se())!==o?(Hn=n,n=vn(r)):(Bn=n,n=o);return n}())===o&&(n=function(){var n,e;n=Bn,function(t){0===qn&&Vn(t)}(wt),t.substr(Bn,4)===T?(e=T,Bn+=4):e=o;e!==o&&(Hn=n,e=bn());return n=e}())===o&&(n=function(){var n,e;n=Bn,function(t){0===qn&&Vn(t)}(Lt),t.substr(Bn,4)===R?(e=R,Bn+=4):e=o;e!==o&&(Hn=n,e=gn());return n=e}())===o&&(n=function(){var n,e,r,u,i,c,a,s,f,l=function(t){0===qn&&Vn(t)};n=Bn,l(xt),t.substr(Bn,4)===C?(e=C,Bn+=4):e=o;e!==o&&(r=Qn())!==o?(l(Tt),44===t.charCodeAt(Bn)?(u=D,Bn++):u=o,u!==o&&(i=se())!==o?(l(Tt),44===t.charCodeAt(Bn)?(c=D,Bn++):c=o,c!==o&&(a=se())!==o?(l(Tt),44===t.charCodeAt(Bn)?(s=D,Bn++):s=o,s!==o&&(f=se())!==o?(ne(),Hn=n,n=yn(r,i,a,f)):(Bn=n,n=o)):(Bn=n,n=o)):(Bn=n,n=o)):(Bn=n,n=o);return n}())===o&&(n=function(){var n,e,r;n=Bn,function(t){0===qn&&Vn(t)}(Rt),t.substr(Bn,6)===P?(e=P,Bn+=6):e=o;e!==o&&(r=se())!==o?(Hn=n,n=Sn(r)):(Bn=n,n=o);return n}())===o&&(n=function(){var n,e,r;n=Bn,function(t){0===qn&&Vn(t)}(Ct),t.substr(Bn,7)===I?(e=I,Bn+=7):e=o;e!==o&&(r=se())!==o?(Hn=n,n=kn(r)):(Bn=n,n=o);return n}())===o&&(n=function(){var n,e;n=Bn,function(t){0===qn&&Vn(t)}(Dt),t.substr(Bn,3)===M?(e=M,Bn+=3):e=o;e!==o&&(Hn=n,e=En());return n=e}())===o&&(n=function(){var n,e;n=Bn,function(t){0===qn&&Vn(t)}(Pt),t.substr(Bn,5)===F?(e=F,Bn+=5):e=o;e!==o&&(Hn=n,e=An());return n=e}())===o&&(n=function(){var n,e,r;n=Bn,function(t){0===qn&&Vn(t)}(It),t.substr(Bn,4)===N?(e=N,Bn+=4):e=o;e!==o&&(r=Kn())!==o?(Hn=n,n=wn(r)):(Bn=n,n=o);return n}())===o&&(n=function(){var n,e,r;n=Bn,function(t){0===qn&&Vn(t)}(Mt),t.substr(Bn,5)===O?(e=O,Bn+=5):e=o;e!==o&&(r=Kn())!==o?(Hn=n,n=Ln(r)):(Bn=n,n=o);return n}())===o&&(n=function(){var n,e,r,u,i,c=function(t){0===qn&&Vn(t)};n=Bn,c(Ft),t.substr(Bn,4)===$?(e=$,Bn+=4):e=o;e!==o&&(r=Qn())!==o?(c(Tt),44===t.charCodeAt(Bn)?(u=D,Bn++):u=o,u!==o&&(i=se())!==o?(ne(),Hn=n,n=xn(r,i)):(Bn=n,n=o)):(Bn=n,n=o);return n}())===o&&(n=function(){var n,e,r,u,i,c=function(t){0===qn&&Vn(t)};n=Bn,c(Nt),t.substr(Bn,4)===B?(e=B,Bn+=4):e=o;e!==o&&(r=Qn())!==o?(c(Tt),44===t.charCodeAt(Bn)?(u=D,Bn++):u=o,u!==o&&(i=se())!==o?(ne(),Hn=n,n=Tn(r,i)):(Bn=n,n=o)):(Bn=n,n=o);return n}())===o&&(n=function(){var n,e;n=Bn,function(t){0===qn&&Vn(t)}(Ot),t.substr(Bn,5)===H?(e=H,Bn+=5):e=o;e!==o&&(Hn=n,e=Rn());return n=e}())===o&&(n=function(){var n,e;n=Bn,function(t){0===qn&&Vn(t)}($t),t.substr(Bn,4)===G?(e=G,Bn+=4):e=o;e!==o&&(Hn=n,e=Cn());return n=e}())===o&&(n=function(){var n,e;n=Bn,function(t){0===qn&&Vn(t)}(Bt),t.substr(Bn,6)===j?(e=j,Bn+=6):e=o;e!==o&&(Hn=n,e=Dn());return n=e}())===o&&(n=function(){var n,e;n=Bn,function(t){0===qn&&Vn(t)}(Ht),t.substr(Bn,4)===q?(e=q,Bn+=4):e=o;e!==o&&(Hn=n,e=Pn());return n=e}())===o&&(n=function(){var n,e;n=Bn,function(t){0===qn&&Vn(t)}(Gt),t.substr(Bn,6)===U?(e=U,Bn+=6):e=o;e!==o&&(Hn=n,e=In());return n=e}())===o&&(n=function(){var n,e;n=Bn,function(t){0===qn&&Vn(t)}(jt),t.substr(Bn,11)===Y?(e=Y,Bn+=11):e=o;e!==o&&(Hn=n,e=Mn());return n=e}())===o&&(n=function(){var n,e;n=Bn,function(t){0===qn&&Vn(t)}(qt),t.substr(Bn,8)===W?(e=W,Bn+=8):e=o;e!==o&&(Hn=n,e=Fn());return n=e}())===o&&(n=function(){var n,e;n=Bn,function(t){0===qn&&Vn(t)}(Ut),t.substr(Bn,8)===_?(e=_,Bn+=8):e=o;e!==o&&(Hn=n,e=Nn());return n=e}());return n}())===o&&(n=function(){var n;(n=function(){var n,e,r;n=Bn,function(t){0===qn&&Vn(t)}(Yt),t.substr(Bn,7)===X?(e=X,Bn+=7):e=o;e!==o&&(r=Qn())!==o?(Hn=n,n=On(r)):(Bn=n,n=o);return n}())===o&&(n=function(){var n,e,r;n=Bn,function(t){0===qn&&Vn(t)}(Wt),t.substr(Bn,5)===V?(e=V,Bn+=5):e=o;e!==o&&(r=se())!==o?(Hn=n,n=$n(r)):(Bn=n,n=o);return n}());return n}())===o&&(n=function(){var t,n;t=Bn,(n=se())!==o&&(Hn=t,n=mn(n));return t=n}());return n}()}function Kn(){var n,e,r,u=function(t){0===qn&&Vn(t)};return n=Bn,u(tt),Z.test(t.charAt(Bn))?(e=t.charAt(Bn),Bn++):e=o,e!==o?(u(tt),Z.test(t.charAt(Bn))?(r=t.charAt(Bn),Bn++):r=o,r===o&&(r=null),Hn=n,n=_t()):(Bn=n,n=o),n}function Qn(){var n,e,r=function(t){0===qn&&Vn(t)};return n=Bn,r(nt),J.test(t.charAt(Bn))?(e=t.charAt(Bn),Bn++):e=o,e!==o&&(Hn=n,e=Xt(e)),(n=e)===o&&(n=Bn,r(et),t.substr(Bn,6)===a?(e=a,Bn+=6):e=o,e!==o&&(Hn=n,e=Vt()),n=e),n}function zn(){var n;return function(t){0===qn&&Vn(t)}(ut),K.test(t.charAt(Bn))?(n=t.charAt(Bn),Bn++):n=o,n}function te(){var n,e;return n=Bn,function(){var n;(function(t){0===qn&&Vn(t)})(ot),t.substr(Bn,2)===f?(n=f,Bn+=2):n=o;return n}()!==o&&(e=function(){var n,e,r,u;n=Bn,function(t){0===qn&&Vn(t)}(it),Q.test(t.charAt(Bn))?(e=t.charAt(Bn),Bn++):e=o;e===o&&(e=null);if(r=[],(u=zn())!==o)for(;u!==o;)r.push(u),u=zn();else r=o;r!==o?n=e=[e,r]:(Bn=n,n=o);return n}())!==o?(Hn=n,n=Qt(e)):(Bn=n,n=o),n}function ne(){var n;return function(t){0===qn&&Vn(t)}(ft),41===t.charCodeAt(Bn)?(n=p,Bn++):n=o,n===o&&(n=null),n}function ee(){var n;return(n=function(){var n,e,r,u,i,c=function(t){0===qn&&Vn(t)};if(n=Bn,e=[],(r=zn())!==o)for(;r!==o;)e.push(r),r=zn();else e=o;if(e!==o)if(c(rt),46===t.charCodeAt(Bn)?(r=s,Bn++):r=o,r!==o){for(u=[],i=zn();i!==o;)u.push(i),i=zn();(i=te())===o&&(i=null),Hn=n,n=Zt(e,u,i)}else Bn=n,n=o;else Bn=n,n=o;if(n===o){if(n=Bn,c(rt),46===t.charCodeAt(Bn)?(e=s,Bn++):e=o,e!==o){if(r=[],(u=zn())!==o)for(;u!==o;)r.push(u),u=zn();else r=o;r!==o?((u=te())===o&&(u=null),Hn=n,n=Jt(r,u)):(Bn=n,n=o)}else Bn=n,n=o;if(n===o){if(n=Bn,e=[],(r=zn())!==o)for(;r!==o;)e.push(r),r=zn();else e=o;e!==o?((r=te())===o&&(r=null),Hn=n,n=Kt(e,r)):(Bn=n,n=o)}}return n}())===o&&(n=function(){var n,e;return n=Bn,function(t){0===qn&&Vn(t)}(st),t.substr(Bn,3)===d?(e=d,Bn+=3):e=o,e!==o&&(Hn=n,e=tn()),n=e}())===o&&(n=Qn())===o&&(n=function(){var n,e,r,u,i=function(t){0===qn&&Vn(t)};if(n=Bn,i(ct),34===t.charCodeAt(Bn)?(e=l,Bn++):e=o,e!==o){for(r=[],i(at),z.test(t.charAt(Bn))?(u=t.charAt(Bn),Bn++):u=o;u!==o;)r.push(u),i(at),z.test(t.charAt(Bn))?(u=t.charAt(Bn),Bn++):u=o;i(ct),34===t.charCodeAt(Bn)?(u=l,Bn++):u=o,u===o&&(u=null),Hn=n,n=zt(r)}else Bn=n,n=o;return n}()),n}function re(){var n,e,r;return(n=function(){var n,e,r,u,i=function(t){0===qn&&Vn(t)};return(n=ee())===o&&(n=Bn,i(lt),40===t.charCodeAt(Bn)?(e=m,Bn++):e=o,e!==o&&(r=se())!==o?(i(ft),41===t.charCodeAt(Bn)?(u=p,Bn++):u=o,u!==o?(Hn=n,n=nn(r)):(Bn=n,n=o)):(Bn=n,n=o)),n}())===o&&(n=Bn,(e=function(){var n,e;return n=Bn,function(t){0===qn&&Vn(t)}(dt),45===t.charCodeAt(Bn)?(e=h,Bn++):e=o,e!==o&&(Hn=n,e=en()),n=e}())!==o&&(r=re())!==o?(Hn=n,n=rn(e,r)):(Bn=n,n=o)),n}function ue(){var n,e,r=function(t){0===qn&&Vn(t)};return n=Bn,r(pt),42===t.charCodeAt(Bn)?(e=v,Bn++):e=o,e!==o&&(Hn=n,e=un()),(n=e)===o&&(n=Bn,r(mt),47===t.charCodeAt(Bn)?(e=b,Bn++):e=o,e!==o&&(Hn=n,e=on()),n=e),n}function oe(){var t,n,e,r,u,i;if(t=Bn,(n=re())!==o){for(e=[],r=Bn,(u=ue())!==o&&(i=re())!==o?r=u=[u,i]:(Bn=r,r=o);r!==o;)e.push(r),r=Bn,(u=ue())!==o&&(i=re())!==o?r=u=[u,i]:(Bn=r,r=o);Hn=t,t=cn(n,e)}else Bn=t,t=o;return t}function ie(){var n,e=function(t){0===qn&&Vn(t)};return e(ht),43===t.charCodeAt(Bn)?(n=g,Bn++):n=o,n===o&&(e(dt),45===t.charCodeAt(Bn)?(n=h,Bn++):n=o),n}function ce(){var t,n,e,r,u,i;if(t=Bn,(n=oe())!==o){for(e=[],r=Bn,(u=ie())!==o&&(i=oe())!==o?r=u=[u,i]:(Bn=r,r=o);r!==o;)e.push(r),r=Bn,(u=ie())!==o&&(i=oe())!==o?r=u=[u,i]:(Bn=r,r=o);Hn=t,t=cn(n,e)}else Bn=t,t=o;return t}function ae(){var n,e,r=function(t){0===qn&&Vn(t)};return n=Bn,r(vt),61===t.charCodeAt(Bn)?(e=y,Bn++):e=o,e!==o&&(Hn=n,e=an()),(n=e)===o&&(n=Bn,r(bt),t.substr(Bn,2)===S?(e=S,Bn+=2):e=o,e!==o&&(Hn=n,e=sn()),(n=e)===o&&(n=Bn,r(gt),t.substr(Bn,2)===k?(e=k,Bn+=2):e=o,e!==o&&(Hn=n,e=fn()),(n=e)===o&&(n=Bn,r(yt),62===t.charCodeAt(Bn)?(e=E,Bn++):e=o,e!==o&&(Hn=n,e=ln()),(n=e)===o&&(n=Bn,r(St),t.substr(Bn,2)===A?(e=A,Bn+=2):e=o,e!==o&&(Hn=n,e=dn()),(n=e)===o&&(n=Bn,r(kt),60===t.charCodeAt(Bn)?(e=w,Bn++):e=o,e!==o&&(Hn=n,e=pn()),n=e))))),n}function se(){var t,n,e,r,u,i;if(t=Bn,(n=ce())!==o){for(e=[],r=Bn,(u=ae())!==o&&(i=ce())!==o?r=u=[u,i]:(Bn=r,r=o);r!==o;)e.push(r),r=Bn,(u=ae())!==o&&(i=ce())!==o?r=u=[u,i]:(Bn=r,r=o);Hn=t,t=cn(n,e)}else Bn=t,t=o;return t}var fe=e(0),le="ti.runtime.assign",de="ti.runtime.str",pe="ti.runtime.negative",me="ti.runtime.multiply",he="ti.runtime.divide",ve="ti.runtime.add",be="ti.runtime.minus",ge="ti.runtime.testEquals",ye="ti.runtime.testNotEquals",Se="ti.runtime.testGreater",ke="ti.runtime.testGreaterEquals",Ee="ti.runtime.testLess",Ae="ti.runtime.testLessEquals",we="ti.runtime.prompt",Le="ti.runtime.num('1')",xe="bus",Te=xe+".mem",Re=Te+".vars.",Ce=Te+".ans",De=xe+".io",Pe=xe+".ctl";function Ie(t){if(null!==t)return Array.isArray(t)?t.join(""):t}function Me(t){const n=Ie(t);return""===n?void 0:n}function Fe(t){return null==t?"''":Array.isArray(t)?"'"+t.join("")+"'":"'"+t+"'"}function Ne(...t){return"("+t.join(", ")+")"}function Oe(t,n=!1){return"("+xe+") => { "+(n?"return ":"")+t+" }"}function $e(t,...n){let e="{ type: '"+t+"'",r=void 0;for(let t=0;t<n.length;t++)void 0===r?r=n[t]:(e+=", "+r+": "+n[t],r=void 0);if(void 0!==r)throw"TI-Basic grammar exception: Property missing value: "+r;return e+=" }"}if(jn.push({pos:Bn,variants:[]}),(u=c())!==o&&Bn===t.length)return u;throw u!==o&&Bn<t.length&&Vn({type:"end"}),function(){var n=jn[0],e=n.pos;return Zn(n.variants,e<t.length?t.charAt(e):null,e<t.length?Xn(e,e+1):Xn(e,e))}()}}},function(t,n,e){"use strict";e.r(n);var r={};e.r(r),e.d(r,"setTinyInterval",(function(){return k})),e.d(r,"clearTinyInterval",(function(){return E})),e.d(r,"resumeTinyInterval",(function(){return A})),e.d(r,"setTinyTimeout",(function(){return w})),e.d(r,"clearTinyTimeout",(function(){return L})),e.d(r,"YIELD",(function(){return x})),e.d(r,"DONE",(function(){return T})),e.d(r,"FAULTED",(function(){return R})),e.d(r,"SUSPEND",(function(){return C})),e.d(r,"addEventListener",(function(){return D})),e.d(r,"removeEventListener",(function(){return P})),e.d(r,"dispatchEvent",(function(){return I}));var u={};e.r(u),e.d(u,"error",(function(){return M})),e.d(u,"default_io",(function(){return F})),e.d(u,"val_io",(function(){return N}));var o={};e.r(o),e.d(o,"error",(function(){return H})),e.d(o,"new_value",(function(){return G})),e.d(o,"new_mem",(function(){return q})),e.d(o,"isTruthy",(function(){return U})),e.d(o,"prgmNew",(function(){return Y})),e.d(o,"prgmExec",(function(){return W})),e.d(o,"run",(function(){return _})),e.d(o,"runLoop",(function(){return X})),e.d(o,"runLine",(function(){return V}));var i={};e.r(i),e.d(i,"disp",(function(){return K})),e.d(i,"prompt",(function(){return Q})),e.d(i,"assign",(function(){return z})),e.d(i,"num",(function(){return tt})),e.d(i,"str",(function(){return nt})),e.d(i,"negative",(function(){return et})),e.d(i,"multiply",(function(){return ut})),e.d(i,"divide",(function(){return ot})),e.d(i,"add",(function(){return it})),e.d(i,"minus",(function(){return ct})),e.d(i,"testEquals",(function(){return st})),e.d(i,"testNotEquals",(function(){return ft})),e.d(i,"testGreater",(function(){return lt})),e.d(i,"testGreaterEquals",(function(){return dt})),e.d(i,"testLess",(function(){return pt})),e.d(i,"testLessEquals",(function(){return mt}));var c={};e.r(c),e.d(c,"download",(function(){return bt})),e.d(c,"parse",(function(){return gt}));const a="tiny-timeout-message",s="tiny-timeout-exception",f=.001,l={},d=[];let p=!1,m=0;const h=1e3,v=document.createTextNode(null);function b(t){const n=new Event(t);v.dispatchEvent(n)}function g(){!1===p&&(p=!0,b("start"),window.postMessage(a,"*"))}function y(t,n,e){const r=m++;return l[r]={func:t,delay:Math.max(n,f),lastRun:void 0,runOnce:e,stopOnException:!0,suspended:!1},g(),r}function S(t){delete l[t]}function k(t,n){y(t,n)}function E(t){S(t)}function A(t){!function(t){if(!(t in l))throw console.log(l),new Error(`Error resuming: task '${t}' not found`);l[t].suspended=!1,g()}(t)}function w(t,n){y(t,n,!0)}function L(t){S(t)}window.addEventListener("message",(function(t){if(t.source!==window||t.data!==a)return;t.stopPropagation();const n=performance.now(),e=Object.keys(l);let r=0,u=0;e.forEach(t=>{const e=l[t];let o;if(!0===e.suspended)o=0,u+=1;else if(r+=1,void 0===e.lastRun||e.runOnce)o=1;else{const t=n-e.lastRun;o=Math.floor(t/e.delay)}o>0&&(e.lastRun=n);for(let n=0;n<o;n++){let n;try{n=e.func()}catch(t){n=R,d.length<h&&(d.push(t),window.postMessage(s,"*"))}if(n===T||e.runOnce||e.stopOnException&&n===R){S(t),r-=1;break}if(n===C){e.suspended=!0,r-=1,u+=1;break}if(n===x)break}}),0===r?(p=!1,b(u>0?"suspend":"stop")):window.postMessage(a,"*")}),!0),window.addEventListener("message",(function(t){if(t.source===window&&t.data===s&&d.length>0)throw d.pop()}),!0);const x="yield",T="done",R="faulted",C="suspend",D=v.addEventListener.bind(v),P=v.removeEventListener.bind(v),I=v.dispatchEvent.bind(v);function M(t,n){"ti"===n.type?t.stderr(`ERR:${n.code}`,n.source):"lib"===n.type&&t.liberr(`Error: ${n.code}`,n.source)}const F={stdout:t=>console.log(t),stderr:(t,n)=>console.log(t),liberr:(t,n)=>console.log(t),onStdin:t=>setTimeout(()=>t(prompt("Input?")),100)};function N(t,n={}){const e=(t,n)=>void 0===t?n:!0===t,r=e(n.includeErrors,!0),u=e(n.includeLineNumbers,!0),o=e(n.includeSource,!0),i=e(n.includeLibErrors,!0),c=n.input,a=(n,e=!0)=>setTimeout(()=>{let r=t.val()+n;e&&(r+="\n"),t.val(r)},0),s=(t,n)=>{let e=t;void 0!==n&&(void 0!==n.index&&u&&(e+=` on line ${n.index}`),void 0!==n.line&&o&&(e+=` :${n.line}`)),a(e)};return{stdout:a,stderr:r?s:F.stderr,liberr:i?s:F.stderr,onStdin:void 0!==c?t=>{setTimeout(()=>c.val(""),0),c.on("keypress",n=>{if(13===n.keyCode){c.off("keypress");const n=c.val();setTimeout(()=>c.val(""),0),t(n)}})}:F.onStdin}}var O=e(0);let $;function B(){return void 0===$&&($=q()),$}function H(t,n,e=!1){return{type:t,code:n,hideSource:e}}function G(t,n="numeric"){return{type:n,value:t}}function j(t){const n=G(0);return n.name=t,n}function q(){return{vars:{A:j("A"),B:j("B"),C:j("C"),D:j("D"),E:j("E"),F:j("F"),G:j("G"),H:j("H"),I:j("I"),J:j("J"),K:j("K"),L:j("L"),M:j("M"),N:j("N"),O:j("O"),P:j("P"),Q:j("Q"),R:j("R"),S:j("S"),T:j("T"),U:j("U"),V:j("V"),W:j("W"),X:j("X"),Y:j("Y"),Z:j("Z"),THETA:j("θ")},ans:j(),prgms:[]}}function U(t){return 0!==t.value}function Y(t,n,e=[]){B().prgms.push({name:t,program:n,source:e})}function W(t){const n=B().prgms.find(n=>n.name===t);void 0===n&&H("UNDEFINED"),_(n.program,{source:n.source})}function _(t,n={}){let e=[];void 0!==n.source&&(e=Array.isArray(n.source)?n.source:n.source.split(/\r?\n/));let r=F;void 0!==n.io&&(r=n.io);let u=1;void 0!==n.frequencyMs&&(u=n.frequencyMs);const o={bus:{mem:q(),io:r,ctl:{resume:void 0,callback:void 0}},debug:!0===n.debug,sourceLines:e,searchLabel:void 0,ifResult:void 0,incrementDecrementResult:void 0,maximumLines:50,linesRun:0,blockStack:[],falsyStackHeight:void 0,falsyBlockPreviousIf:void 0,i:0,lines:t,callback:n.callback,frequencyMs:u,status:"pending"},i=k(()=>X(o),o.frequencyMs);return o.bus.ctl.resume=t=>{o.bus.ctl.callback=t,A(i)},{getStatus:()=>o.status,isActive:()=>"pending"===o.status||"running"===o.status,stop:()=>E(i)}}function X(t){let n;try{t.status="running",n=V(t)}catch(e){if(t.status="faulted",void 0===e.type)throw e;t.i<t.lines.length&&!0!==e.hideSource&&(e.source={index:t.i,line:void 0===t.sourceLines?void 0:t.sourceLines[t.i]}),M(t.bus.io,e),n=T}return n===T?("faulted"!==t.status&&(t.status="done"),void 0!==t.callback&&setTimeout(t.callback,0)):t.i+=1,n}function V(t){if(t.debug&&console.log(`Line: ${t.i}, \tsearchLabel: ${t.searchLabel||""}, \tifResult: ${t.ifResult||""}, \tblockStack: ${t.blockStack||""} \tfalsyStackHeight: ${t.falsyStackHeight||""}, \tfalsyBlockPreviousIf: ${t.falsyBlockPreviousIf||""}, \tsource: ${t.sourceLines[t.i]||""}`),t.i>=t.lines.length){if(void 0!==t.searchLabel)throw H("ti","LABEL");return t.debug&&console.log(t.bus.mem),T}if(void 0!==t.bus.ctl.callback&&(t.bus.ctl.callback(),t.bus.ctl.callback=void 0),t.linesRun++,t.linesRun>=t.maximumLines)throw H("lib","maxlines");const n=t.lines[t.i],e=n.type;if(void 0!==t.falsyStackHeight){const n=t.blockStack[t.blockStack.length-1],r=t.lines[n];return("EndStatement"===e||"ElseStatement"===e&&"ThenStatement"===r.type)&&(t.blockStack.pop(),t.blockStack.length<t.falsyStackHeight&&(t.falsyStackHeight=void 0)),("ForLoop"===e||"RepeatLoop"===e||"WhileLoop"===e||"ThenStatement"===e&&!0===t.falsyBlockPreviousIf||"ElseStatement"===e&&"ThenStatement"===r.type)&&t.blockStack.push(t.i),void(t.falsyBlockPreviousIf="IfStatement"===e)}if(t.falsyBlockPreviousIf=void 0,void 0!==t.searchLabel)return void("LabelStatement"===e&&n.label===t.searchLabel&&(t.searchLabel=void 0));if(void 0!==t.ifResult){const n=!0!==t.ifResult;if(t.ifResult=void 0,"ThenStatement"===e)return t.blockStack.push(t.i),void(n&&(t.falsyStackHeight=t.blockStack.length));if(n)return}if(void 0!==t.incrementDecrementResult){const n=!0!==t.incrementDecrementResult;if(t.incrementDecrementResult=void 0,n)return}let r,u;switch(e){case"IfStatement":t.ifResult=U(n.condition(t.bus));break;case"ThenStatement":throw H("ti","SYNTAX");case"ElseStatement":if(0===t.blockStack.length)throw H("ti","SYNTAX");if("ThenStatement"!==t.lines[t.blockStack.pop()].type)throw H("ti","SYNTAX");t.blockStack.push(t.i),t.falsyStackHeight=t.blockStack.length;break;case"ForLoop":n.init(t.bus),t.blockStack.push(t.i),U(n.condition(t.bus))||(t.falsyStackHeight=t.blockStack.length);break;case"WhileLoop":t.blockStack.push(t.i),U(n.condition(t.bus))||(t.falsyStackHeight=t.blockStack.length);break;case"RepeatLoop":t.blockStack.push(t.i);break;case"EndStatement":if(0===t.blockStack.length)throw H("ti","SYNTAX");if(r=t.blockStack.pop(),"ForLoop"===(u=t.lines[r]).type||"WhileLoop"===u.type||"RepeatLoop"===u.type)"ForLoop"===u.type&&u.step(t.bus),U(u.condition(t.bus))&&(t.blockStack.push(r),t.i=r);else if("ThenStatement"!==u.type&&"ElseStatement"!==u.type)throw H("lib",`impossibleEndFrom'${u.type}`);break;case"PauseStatement":throw H("lib","unimplemented");case"LabelStatement":break;case"GotoStatement":t.searchLabel=n.label,t.i=-1;break;case"IncrementSkip":n.increment(t.bus),t.incrementDecrementResult=U(n.condition(t.bus));break;case"DecrementSkip":n.decrement(t.bus),t.incrementDecrementResult=U(n.condition(t.bus));break;case"Assignment":n.statement(t.bus);break;case"Display":t.bus.io.stdout(function(t){let n="";switch(t.type){case"number":(n=J(t).toString()).startsWith("0.")&&(n=n.substring(1));break;default:throw H("lib","unexpected")}return n}(Z(n.value)));break;case"IoStatement":if(n.statement(t.bus),"suspend"===n.action)return C;break;case"ValueStatement":t.bus.mem.ans=n.statement(t.bus);break;case"SyntaxError":throw H("ti","SYNTAX");default:throw H("lib","unexpected")}}function Z(t){switch(t.type){case O.NUMBER:return t;case"binary":return function(t){const n=Z(t.left),e=Z(t.right);switch(n.type){case"number":return function(t,n,e){if("number"!==n.type)throw H("ti","DATA TYPE");const r=J(t),u=J(n);let o;switch(e){case"+":o=r+u;break;case"-":o=r-u;break;default:throw H("lib","unexpected")}return{type:"number",float:o}}(n,e,t.operator);default:throw H("lib","unexpected")}}(t);default:throw H("lib","unexpected")}}function J(t){if(void 0!==t.float)return t.float;let n="";return void 0!==t.integer&&(n+=t.integer),void 0!==t.fraction&&(n+="."+t.fraction),void 0!==t.exponent&&(n+="e"+t.exponent),parseFloat(n)}function K(t,n){let e=n.value.toString();"numeric"===n.type&&e.startsWith("0.")&&(e=e.substring(1)),t.stdout(e)}function Q(t,n,e){t.stdout(`${e.name}=?`,!1),t.onStdin(r=>n.resume(()=>{if(null==r||""===r)throw t.stdout(""),H("ti","SYNTAX",!0);t.stdout(r),z(e,tt(r))}))}function z(t,n){if(t.type===n.type)t.value=n.value;else if("numeric"!==t.type)throw"string"===t.type?H("ti","DATA TYPE"):H("lib","UnknownVariableType")}function tt(t,n,e){let r="";return void 0!==t&&(r+=t),void 0!==n&&(r+="."+n),void 0!==e&&(r+="e"+e),G(parseFloat(r))}function nt(t){return G(t,"string")}const et=((t,n=["numeric"])=>e=>{if(!n.includes(e.type))throw H("ti","DATA TYPE");return G(t(e.value),e.type)})(t=>-1*t),rt=(t,n=["numeric"])=>(e,r)=>{if(e.type!==r.type||!n.includes(e.type))throw H("ti","DATA TYPE");return G(t(e.value,r.value),e.type)},ut=rt((t,n)=>t*n),ot=rt((t,n)=>t/n),it=rt((t,n)=>t+n,["numeric","string"]),ct=rt((t,n)=>t-n),at=(t,n=["numeric"])=>rt((n,e)=>t(n,e)?1:0,n),st=at((t,n)=>t===n,["numeric","string"]),ft=at((t,n)=>t!==n,["numeric","string"]),lt=at((t,n)=>t>n),dt=at((t,n)=>t>=n),pt=at((t,n)=>t<n),mt=at((t,n)=>t<=n);var ht=e(1),vt=e.n(ht);function bt(t,n){const e=new XMLHttpRequest;e.open("GET",t,!0),e.onload=()=>{if(!(e.status>=200&&e.status<400))throw new Error("Failed to download: "+e.statusText);n(e.response)},e.onerror=()=>{throw new Error("Failed to download.")},e.send()}function gt(t,n={}){if(void 0===t)throw new Error("Undefined source!");const e=n.name,r=n.includeSource;if(void 0!==r&&void 0===e)throw new Error("Cannot include source without specifying name");const u=t.split(/\r?\n/);let o=u.map(t=>{try{const n=vt.a.parse(t);return n.source=t,n}catch(t){if("SyntaxError"===t.name)return{type:"SyntaxError"};throw t}});return void 0!==e&&(o=`tilib.core.prgmNew('${e}', ${o}`,r&&(o+=`, ${function(t){return"[\n  "+t.join(",\n  ")+"\n]"}(u.map(t=>(function(t){return"'"+t+"'"})(t)))}`),o+=")"),o}e.d(n,"core",(function(){return o})),e.d(n,"daemon",(function(){return r})),e.d(n,"io",(function(){return u})),e.d(n,"runtime",(function(){return i})),e.d(n,"parser",(function(){return c}))}]);
//# sourceMappingURL=ti.js.map