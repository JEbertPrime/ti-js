var ti=function(t){var n={};function e(r){if(n[r])return n[r].exports;var u=n[r]={i:r,l:!1,exports:{}};return t[r].call(u.exports,u,u.exports,e),u.l=!0,u.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var u in t)e.d(r,u,function(n){return t[n]}.bind(null,u));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=3)}([function(t,n,e){"use strict";e.r(n),e.d(n,"ti",(function(){return r})),e.d(n,"lib",(function(){return u})),e.d(n,"SyntaxError",(function(){return o})),e.d(n,"NUMBER",(function(){return i})),e.d(n,"LIST",(function(){return a})),e.d(n,"STRING",(function(){return c})),e.d(n,"ANS",(function(){return l})),e.d(n,"GetKey",(function(){return s})),e.d(n,"VARIABLE",(function(){return f})),e.d(n,"STRINGVARIABLE",(function(){return p})),e.d(n,"LISTVARIABLE",(function(){return d})),e.d(n,"LISTINDEX",(function(){return m})),e.d(n,"BINARY",(function(){return h})),e.d(n,"UNARY",(function(){return v})),e.d(n,"ValueStatement",(function(){return S})),e.d(n,"AssignmentStatement",(function(){return b})),e.d(n,"IfStatement",(function(){return y})),e.d(n,"ThenStatement",(function(){return g})),e.d(n,"ElseStatement",(function(){return E})),e.d(n,"ForLoop",(function(){return L})),e.d(n,"WhileLoop",(function(){return R})),e.d(n,"RepeatLoop",(function(){return A})),e.d(n,"EndStatement",(function(){return I})),e.d(n,"PauseStatement",(function(){return w})),e.d(n,"LabelStatement",(function(){return k})),e.d(n,"GotoStatement",(function(){return T})),e.d(n,"IncrementSkip",(function(){return x})),e.d(n,"DecrementSkip",(function(){return N})),e.d(n,"MenuStatement",(function(){return B})),e.d(n,"ProgramStatement",(function(){return M})),e.d(n,"ReturnStatement",(function(){return C})),e.d(n,"StopStatement",(function(){return G})),e.d(n,"DelVarStatement",(function(){return D})),e.d(n,"GraphStyleStatement",(function(){return U})),e.d(n,"OpenLibStatement",(function(){return V})),e.d(n,"ExecLibStatement",(function(){return P})),e.d(n,"Input",(function(){return O})),e.d(n,"Prompt",(function(){return F})),e.d(n,"Display",(function(){return H})),e.d(n,"DispGraph",(function(){return $})),e.d(n,"DispTable",(function(){return Y})),e.d(n,"Output",(function(){return j})),e.d(n,"ClrHome",(function(){return W})),e.d(n,"ClrTable",(function(){return K})),e.d(n,"GetCalc",(function(){return X})),e.d(n,"Get",(function(){return _})),e.d(n,"Send",(function(){return q}));const r="ti",u="lib",o="SyntaxError",i="number",a="list",c="string",l="ans",s="GetKey",f="variable",p="stringVariable",d="listVariable",m="listIndex",h="binary",v="unary",S="value",b="assign",y="IfStatement",g="ThenStatement",E="ElseStatement",L="ForLoop",R="WhileLoop",A="RepeatLoop",I="EndStatement",w="PauseStatement",k="LabelStatement",T="GotoStatement",x="IncrementSkip",N="DecrementSkip",B="MenuStatement",M="ProgramStatement",C="ReturnStatement",G="StopStatement",D="DelVarStatement",U="GraphStyleStatement",V="OpenLibStatement",P="ExecLibStatement",O="Input",F="Prompt",H="display",$="DispGraph",Y="DispTable",j="Output",W="ClrHome",K="ClrTable",X="GetCalc",_="Get",q="Send"},function(t,n,e){"use strict";function r(t,n,e,u){this.message=t,this.expected=n,this.found=e,this.location=u,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}!function(t,n){function e(){this.constructor=t}e.prototype=n.prototype,t.prototype=new e}(r,Error),r.buildMessage=function(t,n){var e={literal:function(t){return'"'+u(t.text)+'"'},class:function(t){var n=t.parts.map((function(t){return Array.isArray(t)?o(t[0])+"-"+o(t[1]):o(t)}));return"["+(t.inverted?"^":"")+n+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description},not:function(t){return"not "+i(t.expected)}};function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function u(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}function i(t){return e[t.type](t)}return"Expected "+function(t){var n,e,r=t.map(i);if(r.sort(),r.length>0){for(n=1,e=1;n<r.length;n++)r[n-1]!==r[n]&&(r[e]=r[n],e++);r.length=e}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(t)+" but "+function(t){return t?'"'+u(t)+'"':"end of input"}(n)+" found."},t.exports={SyntaxError:r,parse:function(t,n){n=void 0!==n?n:{};var u,o={},i={Start:Fe},a=Fe,c=")",l="&theta",s="Str",f="&L",p="&list",d="(",m="&E",h=".",v='"',S="Ans",b="getKey",y="{",g="}",E="&-",L="*",R="/",A="+",I="-",w="=",k="!=",T=">=",x=">",N="<=",B="<",M=",",C="->",G="If ",D="Then",U="Else",V="For(",P="While ",O="Repeat ",F="End",H="Pause",$="Lbl ",Y="Goto ",j="IS>(",W="DS<(",K="Menu(",X="prgm",_="Return",q="Stop",Q="DelVar ",Z="GraphStyle(",z="OpenLib(",J="ExecLib(",tt="Input ",nt="Prompt ",et="Disp ",rt="DispGraph",ut="DispTable",ot="Output(",it="ClrHome",at="ClrTable",ct="GetCalc(",lt="Get(",st="Send(",ft=/^[A-Z]/,pt=/^[A-Z0-9]/,dt=/^[0-9]/,mt=/^[1-6]/,ht=/^[+\-]/,vt=/^[^"]/,St={type:"any"},bt=Ge([["A","Z"]],!1,!1),yt=Ge([["A","Z"],["0","9"]],!1,!1),gt=Ge([["0","9"]],!1,!1),Et=Ce(")",!1),Lt=Ce("&theta",!1),Rt=Ce("Str",!1),At=Ce("&L",!1),It=Ge([["1","6"]],!1,!1),wt=Ce("&list",!1),kt=Ce("(",!1),Tt=Ge(["+","-"],!1,!1),xt=Ce("&E",!1),Nt=Ce(".",!1),Bt=Ge(['"'],!0,!1),Mt=Ce('"',!1),Ct=Ce("Ans",!1),Gt=Ce("getKey",!1),Dt=Ce("{",!1),Ut=Ce("}",!1),Vt=Ce("&-",!1),Pt=Ce("*",!1),Ot=Ce("/",!1),Ft=Ce("+",!1),Ht=Ce("-",!1),$t=Ce("=",!1),Yt=Ce("!=",!1),jt=Ce(">=",!1),Wt=Ce(">",!1),Kt=Ce("<=",!1),Xt=Ce("<",!1),_t=Ce(",",!1),qt=Ce("->",!1),Qt=Ce("If ",!1),Zt=Ce("Then",!1),zt=Ce("Else",!1),Jt=Ce("For(",!1),tn=Ce("While ",!1),nn=Ce("Repeat ",!1),en=Ce("End",!1),rn=Ce("Pause",!1),un=Ce("Lbl ",!1),on=Ce("Goto ",!1),an=Ce("IS>(",!1),cn=Ce("DS<(",!1),ln=Ce("Menu(",!1),sn=Ce("prgm",!1),fn=Ce("Return",!1),pn=Ce("Stop",!1),dn=Ce("DelVar ",!1),mn=Ce("GraphStyle(",!1),hn=Ce("OpenLib(",!1),vn=Ce("ExecLib(",!1),Sn=Ce("Input ",!1),bn=Ce("Prompt ",!1),yn=Ce("Disp ",!1),gn=Ce("DispGraph",!1),En=Ce("DispTable",!1),Ln=Ce("Output(",!1),Rn=Ce("ClrHome",!1),An=Ce("ClrTable",!1),In=Ce("GetCalc(",!1),wn=Ce("Get(",!1),kn=Ce("Send(",!1),Tn=function(){return!0},xn=function(){return Me()},Nn=function(){return"THETA"},Bn=function(t){return"List"+t},Mn=function(){return"List"+Me().substring(5)},Cn=function(t){return{type:Sr.VARIABLE,name:t}},Gn=function(t){return{type:Sr.STRINGVARIABLE,name:t}},Dn=function(t){return{type:Sr.LISTVARIABLE,name:t,custom:!1}},Un=function(t){return{type:Sr.LISTVARIABLE,name:t,custom:!0}},Vn=function(t,n){return{type:Sr.LISTINDEX,list:t,index:n}},Pn=function(t,n,e){return{type:Sr.NUMBER,integer:t,fraction:n,exponent:e}},On=function(t,n){return{type:Sr.NUMBER,fraction:t,exponent:n}},Fn=function(t,n){return{type:Sr.NUMBER,integer:t,exponent:n}},Hn=function(t){return{type:Sr.STRING,chars:t}},$n=function(){return{type:Sr.ANS}},Yn=function(){return{type:Sr.GetKey}},jn=function(t,n){return br.buildList(t,n)},Wn=function(t,n){return{type:Sr.UNARY,operator:t,argument:n}},Kn=function(t,n,e){return br.buildImplicitBinaryExpression(t,n,e)},Xn=function(t,n){return br.buildBinaryExpression(t,n)},_n=function(t){return{type:Sr.ValueStatement,value:t}},qn=function(t,n){return{type:Sr.AssignmentStatement,value:t,assignable:n}},Qn=function(t,n){return{type:Sr.IfStatement,value:t,extra:n}},Zn=function(t){return{type:Sr.ThenStatement,extra:t}},zn=function(t){return{type:Sr.ElseStatement,extra:t}},Jn=function(t,n,e,r,u,o){return{type:Sr.ForLoop,variable:t,start:n,end:e,step:r,args:u,extra:o}},te=function(t,n){return{type:Sr.WhileLoop,value:t,extra:n}},ne=function(t,n){return{type:Sr.RepeatLoop,value:t,extra:n}},ee=function(t){return{type:Sr.EndStatement,extra:t}},re=function(){return{type:Sr.PauseStatement}},ue=function(t){return{type:Sr.LabelStatement,location:t}},oe=function(t){return{type:Sr.GotoStatement,location:t}},ie=function(t,n){return{type:Sr.IncrementSkip,variable:t,end:n}},ae=function(t,n){return{type:Sr.DecrementSkip,variable:t,end:n}},ce=function(t,n){return br.buildMenuStatement(t,n)},le=function(t){return{type:Sr.ProgramStatement,name:t}},se=function(){return{type:Sr.ReturnStatement}},fe=function(){return{type:Sr.StopStatement}},pe=function(t){return{type:Sr.DelVarStatement,variable:t}},de=function(t,n){return{type:Sr.GraphStyleStatement,equation:t,style:n}},me=function(t){return{type:Sr.OpenLibStatement,name:t}},he=function(t){return{type:Sr.ExecLibStatement,name:t}},ve=function(t,n){return{type:Sr.Input,text:t,variable:n}},Se=function(t){return{type:Sr.Prompt,variable:t}},be=function(t){return{type:Sr.Display,value:t}},ye=function(){return{type:Sr.DispGraph}},ge=function(){return{type:Sr.DispTable}},Ee=function(t,n,e){return{type:Sr.Output,row:t,column:n,value:e}},Le=function(){return{type:Sr.ClrHome}},Re=function(){return{type:Sr.ClrTable}},Ae=function(t,n){return{type:Sr.GetCalc,variable:t,portflag:n}},Ie=function(t){return{type:Sr.Get,variable:t}},we=function(t){return{type:Sr.Send,variable:t}},ke=0,Te=0,xe=[{line:1,column:1}],Ne=[],Be=0;if("startRule"in n){if(!(n.startRule in i))throw new Error("Can't start parsing from rule \""+n.startRule+'".');a=i[n.startRule]}function Me(){return t.substring(Te,ke)}function Ce(t,n){return{type:"literal",text:t,ignoreCase:n}}function Ge(t,n,e){return{type:"class",parts:t,inverted:n,ignoreCase:e}}function De(n){var e,r=xe[n];if(r)return r;for(e=n-1;!xe[e];)e--;for(r={line:(r=xe[e]).line,column:r.column};e<n;)10===t.charCodeAt(e)?(r.line++,r.column=1):r.column++,e++;return xe[n]=r,r}var Ue="string"==typeof n.filename&&n.filename.length>0;function Ve(t,e){var r={};Ue&&(r.filename=n.filename);var u=De(t);r.start={offset:t,line:u.line,column:u.column};var o=De(e);return r.end={offset:e,line:o.line,column:o.column},r}function Pe(t){var n=Ne[Ne.length-1];ke<n.pos||(ke>n.pos&&(n.pos=ke,n.variants=[]),n.variants.push(t))}function Oe(t,n,e){return new r(r.buildMessage(t,n),t,n,e)}function Fe(){return function(){var n;(n=function(){var n,e,r,u;n=ke,(e=hr())!==o?(!function(t){0===Be&&Pe(t)}(qt),t.substr(ke,2)===C?(r=C,ke+=2):r=o,r!==o&&(u=Je())!==o?(Te=n,n=qn(e,u)):(ke=n,n=o)):(ke=n,n=o);return n}())===o&&(n=function(){var n;(n=function(){var n,e,r,u;n=ke,function(t){0===Be&&Pe(t)}(Qt),t.substr(ke,3)===G?(e=G,ke+=3):e=o;e!==o?((r=hr())===o&&(r=null),(u=We())===o&&(u=null),Te=n,n=Qn(r,u)):(ke=n,n=o);return n}())===o&&(n=function(){var n,e,r;n=ke,function(t){0===Be&&Pe(t)}(Zt),t.substr(ke,4)===D?(e=D,ke+=4):e=o;e!==o?((r=We())===o&&(r=null),Te=n,n=Zn(r)):(ke=n,n=o);return n}())===o&&(n=function(){var n,e,r;n=ke,function(t){0===Be&&Pe(t)}(zt),t.substr(ke,4)===U?(e=U,ke+=4):e=o;e!==o?((r=We())===o&&(r=null),Te=n,n=zn(r)):(ke=n,n=o);return n}())===o&&(n=function(){var n,e,r,u,i,a,c,l;n=ke,function(t){0===Be&&Pe(t)}(Jt),t.substr(ke,4)===V?(e=V,ke+=4):e=o;e!==o?((r=ze())===o&&(r=null),(u=vr())===o&&(u=null),(i=vr())===o&&(i=null),(a=vr())===o&&(a=null),(c=function(){var t,n,e;if(t=ke,n=[],(e=vr())!==o)for(;e!==o;)n.push(e),e=vr();else n=o;n!==o&&(Te=t,n=Tn());return t=n}())===o&&(c=null),Ke(),(l=We())===o&&(l=null),Te=n,n=Jn(r,u,i,a,c,l)):(ke=n,n=o);return n}())===o&&(n=function(){var n,e,r,u;n=ke,function(t){0===Be&&Pe(t)}(tn),t.substr(ke,6)===P?(e=P,ke+=6):e=o;e!==o?((r=hr())===o&&(r=null),(u=We())===o&&(u=null),Te=n,n=te(r,u)):(ke=n,n=o);return n}())===o&&(n=function(){var n,e,r,u;n=ke,function(t){0===Be&&Pe(t)}(nn),t.substr(ke,7)===O?(e=O,ke+=7):e=o;e!==o?((r=hr())===o&&(r=null),(u=We())===o&&(u=null),Te=n,n=ne(r,u)):(ke=n,n=o);return n}())===o&&(n=function(){var n,e,r;n=ke,function(t){0===Be&&Pe(t)}(en),t.substr(ke,3)===F?(e=F,ke+=3):e=o;e!==o?((r=We())===o&&(r=null),Te=n,n=ee(r)):(ke=n,n=o);return n}())===o&&(n=function(){var n,e;n=ke,function(t){0===Be&&Pe(t)}(rn),t.substr(ke,5)===H?(e=H,ke+=5):e=o;e!==o&&(Te=n,e=re());return n=e}())===o&&(n=function(){var n,e,r;n=ke,function(t){0===Be&&Pe(t)}(un),t.substr(ke,4)===$?(e=$,ke+=4):e=o;e!==o&&(r=Xe())!==o?(Te=n,n=ue(r)):(ke=n,n=o);return n}())===o&&(n=function(){var n,e,r;n=ke,function(t){0===Be&&Pe(t)}(on),t.substr(ke,5)===Y?(e=Y,ke+=5):e=o;e!==o&&(r=Xe())!==o?(Te=n,n=oe(r)):(ke=n,n=o);return n}())===o&&(n=function(){var n,e,r,u;n=ke,function(t){0===Be&&Pe(t)}(an),t.substr(ke,4)===j?(e=j,ke+=4):e=o;e!==o?((r=ze())===o&&(r=null),(u=vr())===o&&(u=null),Ke(),Te=n,n=ie(r,u)):(ke=n,n=o);return n}())===o&&(n=function(){var n,e,r,u;n=ke,function(t){0===Be&&Pe(t)}(cn),t.substr(ke,4)===W?(e=W,ke+=4):e=o;e!==o?((r=ze())===o&&(r=null),(u=vr())===o&&(u=null),Ke(),Te=n,n=ae(r,u)):(ke=n,n=o);return n}())===o&&(n=function(){var n,e,r,u,i,a,c,l,s,f=function(t){0===Be&&Pe(t)};n=ke,f(ln),t.substr(ke,5)===K?(e=K,ke+=5):e=o;if(e!==o){for((r=hr())===o&&(r=null),u=[],i=ke,f(_t),44===t.charCodeAt(ke)?(a=M,ke++):a=o,a!==o&&(c=rr())!==o?(f(_t),44===t.charCodeAt(ke)?(l=M,ke++):l=o,l!==o&&(s=Xe())!==o?i=a=[a,c,l,s]:(ke=i,i=o)):(ke=i,i=o);i!==o;)u.push(i),i=ke,f(_t),44===t.charCodeAt(ke)?(a=M,ke++):a=o,a!==o&&(c=rr())!==o?(f(_t),44===t.charCodeAt(ke)?(l=M,ke++):l=o,l!==o&&(s=Xe())!==o?i=a=[a,c,l,s]:(ke=i,i=o)):(ke=i,i=o);i=Ke(),Te=n,n=ce(r,u)}else ke=n,n=o;return n}())===o&&(n=function(){var n,e,r;n=ke,function(t){0===Be&&Pe(t)}(sn),t.substr(ke,4)===X?(e=X,ke+=4):e=o;e!==o&&(r=_e())!==o?(Te=n,n=le(r)):(ke=n,n=o);return n}())===o&&(n=function(){var n,e;n=ke,function(t){0===Be&&Pe(t)}(fn),t.substr(ke,6)===_?(e=_,ke+=6):e=o;e!==o&&(Te=n,e=se());return n=e}())===o&&(n=function(){var n,e;n=ke,function(t){0===Be&&Pe(t)}(pn),t.substr(ke,4)===q?(e=q,ke+=4):e=o;e!==o&&(Te=n,e=fe());return n=e}())===o&&(n=function(){var n,e,r;n=ke,function(t){0===Be&&Pe(t)}(dn),t.substr(ke,7)===Q?(e=Q,ke+=7):e=o;e!==o?((r=ze())===o&&(r=null),Te=n,n=pe(r)):(ke=n,n=o);return n}())===o&&(n=function(){var n,e,r,u;n=ke,function(t){0===Be&&Pe(t)}(mn),t.substr(ke,11)===Z?(e=Z,ke+=11):e=o;e!==o?((r=hr())===o&&(r=null),(u=vr())===o&&(u=null),Ke(),Te=n,n=de(r,u)):(ke=n,n=o);return n}())===o&&(n=function(){var n,e,r;n=ke,function(t){0===Be&&Pe(t)}(hn),t.substr(ke,8)===z?(e=z,ke+=8):e=o;e!==o&&(r=_e())!==o?(Ke(),Te=n,n=me(r)):(ke=n,n=o);return n}())===o&&(n=function(){var n,e,r;n=ke,function(t){0===Be&&Pe(t)}(vn),t.substr(ke,8)===J?(e=J,ke+=8):e=o;e!==o&&(r=_e())!==o?(Ke(),Te=n,n=he(r)):(ke=n,n=o);return n}());return n}())===o&&(n=function(){var n;(n=function(){var n,e,r,u;n=ke,function(t){0===Be&&Pe(t)}(Sn),t.substr(ke,6)===tt?(e=tt,ke+=6):e=o;e!==o?((r=function(){var n,e,r;n=ke,(e=hr())!==o?(!function(t){0===Be&&Pe(t)}(_t),44===t.charCodeAt(ke)?(r=M,ke++):r=o,r!==o?n=e:(ke=n,n=o)):(ke=n,n=o);return n}())===o&&(r=null),(u=ze())===o&&(u=null),Te=n,n=ve(r,u)):(ke=n,n=o);return n}())===o&&(n=function(){var n,e,r;n=ke,function(t){0===Be&&Pe(t)}(bn),t.substr(ke,7)===nt?(e=nt,ke+=7):e=o;e!==o?((r=ze())===o&&(r=null),Te=n,n=Se(r)):(ke=n,n=o);return n}())===o&&(n=function(){var n,e,r;n=ke,function(t){0===Be&&Pe(t)}(yn),t.substr(ke,5)===et?(e=et,ke+=5):e=o;e!==o?((r=hr())===o&&(r=null),Te=n,n=be(r)):(ke=n,n=o);return n}())===o&&(n=function(){var n,e;n=ke,function(t){0===Be&&Pe(t)}(gn),t.substr(ke,9)===rt?(e=rt,ke+=9):e=o;e!==o&&(Te=n,e=ye());return n=e}())===o&&(n=function(){var n,e;n=ke,function(t){0===Be&&Pe(t)}(En),t.substr(ke,9)===ut?(e=ut,ke+=9):e=o;e!==o&&(Te=n,e=ge());return n=e}())===o&&(n=function(){var n,e,r,u,i;n=ke,function(t){0===Be&&Pe(t)}(Ln),t.substr(ke,7)===ot?(e=ot,ke+=7):e=o;e!==o?((r=hr())===o&&(r=null),(u=vr())===o&&(u=null),(i=vr())===o&&(i=null),Ke(),Te=n,n=Ee(r,u,i)):(ke=n,n=o);return n}())===o&&(n=function(){var n,e;n=ke,function(t){0===Be&&Pe(t)}(Rn),t.substr(ke,7)===it?(e=it,ke+=7):e=o;e!==o&&(Te=n,e=Le());return n=e}())===o&&(n=function(){var n,e;n=ke,function(t){0===Be&&Pe(t)}(An),t.substr(ke,8)===at?(e=at,ke+=8):e=o;e!==o&&(Te=n,e=Re());return n=e}())===o&&(n=function(){var n,e,r,u;n=ke,function(t){0===Be&&Pe(t)}(In),t.substr(ke,8)===ct?(e=ct,ke+=8):e=o;e!==o?((r=ze())===o&&(r=null),(u=vr())===o&&(u=null),Ke(),Te=n,n=Ae(r,u)):(ke=n,n=o);return n}())===o&&(n=function(){var n,e,r;n=ke,function(t){0===Be&&Pe(t)}(wn),t.substr(ke,4)===lt?(e=lt,ke+=4):e=o;e!==o?((r=ze())===o&&(r=null),Ke(),Te=n,n=Ie(r)):(ke=n,n=o);return n}())===o&&(n=function(){var n,e,r;n=ke,function(t){0===Be&&Pe(t)}(kn),t.substr(ke,5)===st?(e=st,ke+=5):e=o;e!==o?((r=ze())===o&&(r=null),Ke(),Te=n,n=we(r)):(ke=n,n=o);return n}());return n}())===o&&(n=function(){var t,n;t=ke,(n=hr())!==o&&(Te=t,n=_n(n));return t=n}());return n}()}function He(){var n;return function(t){0===Be&&Pe(t)}(St),t.length>ke?(n=t.charAt(ke),ke++):n=o,n}function $e(){var n;return function(t){0===Be&&Pe(t)}(bt),ft.test(t.charAt(ke))?(n=t.charAt(ke),ke++):n=o,n}function Ye(){var n;return function(t){0===Be&&Pe(t)}(yt),pt.test(t.charAt(ke))?(n=t.charAt(ke),ke++):n=o,n}function je(){var n;return function(t){0===Be&&Pe(t)}(gt),dt.test(t.charAt(ke))?(n=t.charAt(ke),ke++):n=o,n}function We(){var t,n,e;if(t=ke,n=[],(e=He())!==o)for(;e!==o;)n.push(e),e=He();else n=o;return n!==o&&(Te=t,n=Tn()),t=n}function Ke(){var n;return function(t){0===Be&&Pe(t)}(Et),41===t.charCodeAt(ke)?(n=c,ke++):n=o,n===o&&(n=null),n}function Xe(){var t;return t=ke,Ye()!==o?(Ye()===o&&null,Te=t,t=xn()):(ke=t,t=o),t}function _e(){var t;return t=ke,$e()!==o?(Ye()===o&&null,Ye()===o&&null,Ye()===o&&null,Ye()===o&&null,Ye()===o&&null,Ye()===o&&null,Ye()===o&&null,Te=t,t=xn()):(ke=t,t=o),t}function qe(){var n,e;return n=ke,(e=function(){var n,e;return(n=$e())===o&&(n=ke,function(t){0===Be&&Pe(t)}(Lt),t.substr(ke,6)===l?(e=l,ke+=6):e=o,e!==o&&(Te=n,e=Nn()),n=e),n}())!==o&&(Te=n,e=Cn(e)),n=e}function Qe(){var n,e;return n=ke,(e=function(){var n,e;return n=ke,function(t){0===Be&&Pe(t)}(Rt),t.substr(ke,3)===s?(e=s,ke+=3):e=o,e!==o&&je()!==o?(Te=n,n=xn()):(ke=n,n=o),n}())!==o&&(Te=n,e=Gn(e)),n=e}function Ze(){var n,e;return n=ke,(e=function(){var n,e,r,u=function(t){0===Be&&Pe(t)};return n=ke,u(At),t.substr(ke,2)===f?(e=f,ke+=2):e=o,e!==o?(u(It),mt.test(t.charAt(ke))?(r=t.charAt(ke),ke++):r=o,r!==o?(Te=n,n=Bn(r)):(ke=n,n=o)):(ke=n,n=o),n}())!==o&&(Te=n,e=Dn(e)),(n=e)===o&&(n=ke,(e=function(){var n,e;return n=ke,function(t){0===Be&&Pe(t)}(wt),t.substr(ke,5)===p?(e=p,ke+=5):e=o,e!==o&&$e()!==o?(Ye()===o&&null,Ye()===o&&null,Ye()===o&&null,Ye()===o&&null,Te=n,n=Mn()):(ke=n,n=o),n}())!==o&&(Te=n,e=Un(e)),n=e),n}function ze(){var t;return(t=Qe())===o&&(t=qe())===o&&(t=Ze()),t}function Je(){var n;return(n=function(){var n,e,r,u;return n=ke,(e=Ze())!==o?(!function(t){0===Be&&Pe(t)}(kt),40===t.charCodeAt(ke)?(r=d,ke++):r=o,r!==o&&(u=hr())!==o?(Ke(),Te=n,n=Vn(e,u)):(ke=n,n=o)):(ke=n,n=o),n}())===o&&(n=ze()),n}function tr(){var n,e,r;if(n=ke,e=[],(r=je())!==o)for(;r!==o;)e.push(r),r=je();else e=o;return n=e!==o?t.substring(n,ke):e}function nr(){var n,e,r;return n=ke,function(){var n;return function(t){0===Be&&Pe(t)}(xt),t.substr(ke,2)===m?(n=m,ke+=2):n=o,n}()!==o?(e=ke,r=function(){var n,e,r,u;return n=ke,e=ke,function(t){0===Be&&Pe(t)}(Tt),ht.test(t.charAt(ke))?(r=t.charAt(ke),ke++):r=o,r===o&&(r=null),(u=tr())!==o?e=r=[r,u]:(ke=e,e=o),n=e!==o?t.substring(n,ke):e}(),(e=r!==o?t.substring(e,ke):r)!==o?n=e:(ke=n,n=o)):(ke=n,n=o),n}function er(){var n;return function(t){0===Be&&Pe(t)}(Bt),vt.test(t.charAt(ke))?(n=t.charAt(ke),ke++):n=o,n}function rr(){var n,e,r,u,i=function(t){0===Be&&Pe(t)};return n=ke,i(Mt),34===t.charCodeAt(ke)?(e=v,ke++):e=o,e!==o?(r=function(){var n,e,r;for(n=ke,e=[],r=er();r!==o;)e.push(r),r=er();return n=t.substring(n,ke)}(),i(Mt),34===t.charCodeAt(ke)?(u=v,ke++):u=o,u===o&&(u=null),Te=n,n=Hn(r)):(ke=n,n=o),n}function ur(){var n;return(n=function(){var n,e;return n=ke,function(t){0===Be&&Pe(t)}(Ct),t.substr(ke,3)===S?(e=S,ke+=3):e=o,e!==o&&(Te=n,e=$n()),n=e}())===o&&(n=function(){var n,e;return n=ke,function(t){0===Be&&Pe(t)}(Gt),t.substr(ke,6)===b?(e=b,ke+=6):e=o,e!==o&&(Te=n,e=Yn()),n=e}()),n}function or(){var n,e,r,u,i=function(t){0===Be&&Pe(t)};return(n=function(){var t;return(t=ur())===o&&(t=Je())===o&&(t=rr()),t}())===o&&(n=ke,i(kt),40===t.charCodeAt(ke)?(e=d,ke++):e=o,e!==o&&(r=hr())!==o?(i(Et),41===t.charCodeAt(ke)?(u=c,ke++):u=o,u!==o?n=r:(ke=n,n=o)):(ke=n,n=o),n===o&&(n=function(){var n,e,r,u,i,a=function(t){0===Be&&Pe(t)};if(n=ke,a(Dt),123===t.charCodeAt(ke)?(e=y,ke++):e=o,e!==o)if((r=hr())!==o){for(u=[],i=vr();i!==o;)u.push(i),i=vr();a(Ut),125===t.charCodeAt(ke)?(i=g,ke++):i=o,i===o&&(i=null),Te=n,n=jn(r,u)}else ke=n,n=o;else ke=n,n=o;return n}())),n}function ir(){var n;return function(t){0===Be&&Pe(t)}(Vt),t.substr(ke,2)===E?(n=E,ke+=2):n=o,n}function ar(){var t,n,e;return(t=or())===o&&(t=ke,(n=ir())!==o&&(e=ar())!==o?(Te=t,t=Wn(n,e)):(ke=t,t=o)),t}function cr(){var n,e,r;return(n=ar())===o&&(n=function(){var n,e,r,u,i,a=function(t){0===Be&&Pe(t)};return n=ke,(e=tr())!==o?(a(Nt),46===t.charCodeAt(ke)?(r=h,ke++):r=o,r!==o?((u=tr())===o&&(u=null),(i=nr())===o&&(i=null),Te=n,n=Pn(e,u,i)):(ke=n,n=o)):(ke=n,n=o),n===o&&(n=ke,a(Nt),46===t.charCodeAt(ke)?(e=h,ke++):e=o,e!==o&&(r=tr())!==o?((u=nr())===o&&(u=null),Te=n,n=On(r,u)):(ke=n,n=o),n===o&&(n=ke,(e=tr())!==o?((r=nr())===o&&(r=null),Te=n,n=Fn(e,r)):(ke=n,n=o))),n}())===o&&(n=ke,(e=ir())!==o&&(r=cr())!==o?(Te=n,n=Wn(e,r)):(ke=n,n=o)),n}function lr(){var t,n,e,r,u,i;if(t=ke,(n=ar())!==o){for(e=[],r=ke,(u=cr())!==o&&(i=ar())!==o?r=u=[u,i]:(ke=r,r=o);r!==o;)e.push(r),r=ke,(u=cr())!==o&&(i=ar())!==o?r=u=[u,i]:(ke=r,r=o);(r=cr())===o&&(r=null),Te=t,t=Kn(n,e,r)}else ke=t,t=o;if(t===o){if(t=ke,(n=cr())!==o){for(e=[],r=ke,(u=ar())!==o&&(i=cr())!==o?r=u=[u,i]:(ke=r,r=o);r!==o;)e.push(r),r=ke,(u=ar())!==o&&(i=cr())!==o?r=u=[u,i]:(ke=r,r=o);(r=ar())===o&&(r=null),Te=t,t=Kn(n,e,r)}else ke=t,t=o;t===o&&(t=cr())}return t}function sr(){var n,e=function(t){0===Be&&Pe(t)};return e(Pt),42===t.charCodeAt(ke)?(n=L,ke++):n=o,n===o&&(e(Ot),47===t.charCodeAt(ke)?(n=R,ke++):n=o),n}function fr(){var t,n,e,r,u,i;if(t=ke,(n=lr())!==o){for(e=[],r=ke,(u=sr())!==o&&(i=lr())!==o?r=u=[u,i]:(ke=r,r=o);r!==o;)e.push(r),r=ke,(u=sr())!==o&&(i=lr())!==o?r=u=[u,i]:(ke=r,r=o);Te=t,t=Xn(n,e)}else ke=t,t=o;return t}function pr(){var n,e=function(t){0===Be&&Pe(t)};return e(Ft),43===t.charCodeAt(ke)?(n=A,ke++):n=o,n===o&&(e(Ht),45===t.charCodeAt(ke)?(n=I,ke++):n=o),n}function dr(){var t,n,e,r,u,i;if(t=ke,(n=fr())!==o){for(e=[],r=ke,(u=pr())!==o&&(i=fr())!==o?r=u=[u,i]:(ke=r,r=o);r!==o;)e.push(r),r=ke,(u=pr())!==o&&(i=fr())!==o?r=u=[u,i]:(ke=r,r=o);Te=t,t=Xn(n,e)}else ke=t,t=o;return t}function mr(){var n,e=function(t){0===Be&&Pe(t)};return e($t),61===t.charCodeAt(ke)?(n=w,ke++):n=o,n===o&&(e(Yt),t.substr(ke,2)===k?(n=k,ke+=2):n=o,n===o&&(e(jt),t.substr(ke,2)===T?(n=T,ke+=2):n=o,n===o&&(e(Wt),62===t.charCodeAt(ke)?(n=x,ke++):n=o,n===o&&(e(Kt),t.substr(ke,2)===N?(n=N,ke+=2):n=o,n===o&&(e(Xt),60===t.charCodeAt(ke)?(n=B,ke++):n=o))))),n}function hr(){var t,n,e,r,u,i;if(t=ke,(n=dr())!==o){for(e=[],r=ke,(u=mr())!==o&&(i=dr())!==o?r=u=[u,i]:(ke=r,r=o);r!==o;)e.push(r),r=ke,(u=mr())!==o&&(i=dr())!==o?r=u=[u,i]:(ke=r,r=o);Te=t,t=Xn(n,e)}else ke=t,t=o;return t}function vr(){var n,e,r;return n=ke,function(t){0===Be&&Pe(t)}(_t),44===t.charCodeAt(ke)?(e=M,ke++):e=o,e!==o&&(r=hr())!==o?n=r:(ke=n,n=o),n}const Sr=e(0),br=e(2);if(Ne.push({pos:ke,variants:[]}),(u=a())!==o&&ke===t.length)return u;throw u!==o&&ke<t.length&&Pe({type:"end"}),function(){var n=Ne[0],e=n.pos;return Oe(n.variants,e<t.length?t.charAt(e):null,e<t.length?Ve(e,e+1):Ve(e,e))}()}}},function(t,n,e){"use strict";e.r(n),e.d(n,"buildBinaryExpression",(function(){return u})),e.d(n,"buildImplicitBinaryExpression",(function(){return o})),e.d(n,"buildMenuStatement",(function(){return i})),e.d(n,"buildList",(function(){return a}));var r=e(0);function u(t,n){return n.reduce((function(t,n){return{type:r.BINARY,operator:n[0],left:t,right:n[1]}}),t)}function o(t,n,e){const u=n.flat();return null!==e&&u.push(e),u.reduce((function(t,n){return{type:r.BINARY,operator:"*",left:t,right:n}}),t)}function i(t,n){const e=n.map((function(t){return{option:t[1],location:t[3]}}));return{type:r.MenuStatement,title:t,choices:e}}function a(t,n){return{type:r.LIST,elements:[t].concat(n)}}},function(t,n,e){"use strict";e.r(n);var r=e(0);function u(t,n,e=!1){return{type:t,code:n,hideSource:e}}function o(t,n=!1){return u(r.ti,t,n)}const i=o("DATA TYPE"),a=o("SYNTAX"),c=o("UNDEFINED"),l=o("LABEL"),s=o("ARGUMENT"),f=o("DIM MISMATCH"),p=o("DIVIDE BY 0"),d=o("INVALID DIM"),m=o("DOMAIN");function h(t,n=!1){return u(r.lib,t,n)}const v=h("unimplemented");function S(t=0){return{type:r.NUMBER,float:t}}const b=S(1),y=S(-1),g="yield",E="done",L="faulted",R="suspend";var A=e(1),I=e.n(A);function w(t,n={}){if(void 0===t)throw new Error("Undefined source!");const e=n.sourceMap||"inline";return t.split(/\r?\n/).map(t=>{let n;try{n=I.a.parse(t)}catch(t){if("SyntaxError"!==t.name)throw t;n={type:"SyntaxError"}}return"inline"===e&&(n.source=t),n})}function k(t){if(t.type===r.NUMBER)return 0!==t.float;throw i}function T(t,n,e){if(n.type===r.STRINGVARIABLE){if(e.type!==r.STRING)throw i}else if(n.type===r.VARIABLE){if(e.type!==r.NUMBER)return}else if(n.type===r.LISTVARIABLE){if(e.type!==r.LIST)throw i}else{if(n.type!==r.LISTINDEX)throw h("unexpected variable type");if(e.type!==r.LIST)throw i}t.vars[n.name]=e}function x(t,n){t.ans=n}function N(t,n,e){return{type:r.BINARY,operator:n,left:t,right:e}}function B(t){let n="";return void 0!==t.integer&&null!==t.integer&&(n+=t.integer),void 0!==t.fraction&&null!==t.fraction&&(n+="."+t.fraction),void 0!==t.exponent&&null!==t.exponent&&(n+="e"+t.exponent),parseFloat(n)}function M(t,n=!1){if(n&&t.type!==r.STRING)throw i;let e="";switch(t.type){case r.NUMBER:(e=t.float.toString()).startsWith("0.")&&(e=e.substring(1));break;case r.STRING:e=t.chars;break;case r.LIST:e="{"+t.elements.map(t=>M(t)).join(" ")+"}";break;default:throw h("unexpected value tostring")}return e}function C(t,n){const e=G[t.type];if(void 0===e)throw h("unexpected value");return e(t,n)}const G={};G[r.SyntaxError]=(t,n)=>{throw a},G[r.NUMBER]=(t,n)=>void 0!==t.float?t:{type:r.NUMBER,float:B(t)},G[r.STRING]=(t,n)=>t,G[r.LIST]=(t,n)=>!0===t.resolved?t:{type:r.LIST,elements:t.elements.map((function(t){const e=C(t,n);if(e.type!==r.NUMBER)throw i;return e})),resolved:!0},G[r.VARIABLE]=(t,n)=>{let e=n.vars[t.name];return void 0===e&&(e=n.vars[t.name]=S()),e},G[r.STRINGVARIABLE]=(t,n)=>{const e=n.vars[t.name];if(void 0===e)throw c;return e},G[r.LISTVARIABLE]=(t,n)=>{const e=n.vars[t.name];if(void 0===e)throw c;return e},G[r.LISTINDEX]=(t,n)=>{const e=C(t.list,n),u=C(t.index,n);if(u.type!==r.NUMBER)throw d;if(u.float<1||u.float>e.elements.length)throw d;return{type:r.NUMBER,float:e.elements[u.float-1].float}},G[r.ANS]=(t,n)=>n.ans,G[r.GetKey]=(t,n)=>{throw v},G[r.UNARY]=(t,n)=>{const e=C(t.argument,n),r=D[e.type];if(void 0===r)throw h("unexpected unary argument");return r(t.operator,e)},G[r.BINARY]=(t,n)=>{const e=C(t.left,n),r=C(t.right,n),u=U[e.type];if(void 0===u)throw h("unexpected binary left");return u(t.operator,e,r)};const D={};D[r.NUMBER]=(t,n)=>({type:r.NUMBER,float:P(t,n.float)}),D[r.STRING]=(t,n)=>{throw i},D[r.LIST]=(t,n)=>({type:r.LIST,elements:n.elements.map(n=>({type:r.NUMBER,float:P(t,n.float)})),resolved:!0});const U={};function V(t,n,e){return{type:r.LIST,elements:n.elements.map((n,u)=>({type:r.NUMBER,float:O(t,n.float,e.float)})),resolved:!0}}function P(t,n){switch(t){case"&-":return-1*n;default:throw h("unexpected unary operator")}}function O(t,n,e){if("/"===t&&0===e)throw p;switch(t){case"+":return n+e;case"-":return n-e;case"*":return n*e;case"/":return n/e;case"=":return n===e?1:0;case"!=":return n!==e?1:0;case">=":return n>=e?1:0;case">":return n>e?1:0;case"<=":return n<=e?1:0;case"<":return n<e?1:0;default:throw h("unexpected binary operator")}}U[r.NUMBER]=(t,n,e)=>{if(e.type!==r.NUMBER){if(e.type===r.LIST)return V(t,e,n);throw i}return{type:r.NUMBER,float:O(t,n.float,e.float)}},U[r.STRING]=(t,n,e)=>{if(e.type!==r.STRING)throw i;if(["+"].includes(t))return{type:r.STRING,chars:O(t,n.chars,e.chars)};if(["=","!="].includes(t))return{type:r.NUMBER,float:O(t,n.chars,e.chars)};throw i},U[r.LIST]=(t,n,e)=>{if(e.type!==r.LIST){if(e.type===r.NUMBER)return V(t,n,e);throw i}if(n.elements.length!==e.elements.length)throw f;return{type:r.LIST,elements:n.elements.map((n,u)=>({type:r.NUMBER,float:O(t,n.float,e.elements[u].float)})),resolved:!0}};const F={};F[r.VARIABLE]=(t,n,e)=>{n.type===r.NUMBER&&(e.vars[t.name]=n)},F[r.STRINGVARIABLE]=(t,n,e)=>{if(n.type!==r.STRING)throw i;e.vars[t.name]=n},F[r.LISTVARIABLE]=(t,n,e)=>{if(n.type!==r.LIST)throw i;e.vars[t.name]=n},F[r.LISTINDEX]=(t,n,e)=>{const u=C(t.list,e),o=C(t.index,e);if(o.type!==r.NUMBER)throw i;if(o.float<1||o.float>u.elements.length)throw d;e.vars[t.list.name].elements[o.float-1]=n};const H=13;function $(t,n={},e=!0){void 0!==n.elem?setTimeout(()=>{let r=n.elem.val()+t;e&&(r+="\n"),n.elem.val(r)},0):console.log(t)}function Y(t,n={}){void 0!==n.stdin&&""!==n.stdin&&void 0===n.stdinQueue&&(n.stdinQueue=n.stdin.split("\n").reverse()),void 0===n.stdinQueue?void 0!==n.input?(setTimeout(()=>n.input.val(""),0),n.input.on("keypress",e=>{if(e.keyCode===H){const e=n.input.val();setTimeout(()=>n.input.val(""),0),!0!==t(e)&&n.input.off("keypress")}})):setTimeout(()=>{!0===t(prompt("Input?"))&&Y(t,n)},100):setTimeout(()=>{const e=n.stdinQueue.pop();!0===t(e)&&Y(t,n)},0)}const j={};function W(t,n,e){if(!function(t,n){return n.name in t.vars}(t,n))throw c;T(t,n,C({type:r.BINARY,operator:"+",left:n,right:e},t))}function K(t,n,e,u){return $(t,e.io,!1),Y(t=>{if(null==t||""===t)return!0;e.resume(()=>{let o;$(t,e.io),o=n.type===r.STRINGVARIABLE&&u?{type:r.STRING,chars:t}:C(function(t){if(void 0===t)throw new Error("Undefined source!");const n=t.split(/\r?\n/);if(n.Length>1)throw new Error("Too many lines for an expression");const e=n[0];let u;try{u=I.a.parse(e)}catch(t){if("SyntaxError"!==t.name)throw t}return void 0!==u&&u.type===r.ValueStatement?u.value:{type:"SyntaxError"}}(t),e.mem),n.type===r.VARIABLE&&o.type===r.LIST&&(n={type:r.LISTVARIABLE,name:`List${n.name}`,custom:!0}),T(e.mem,n,o)})},e.io),R}j[r.AssignmentStatement]=(t,n)=>{const e=C(t.value,n.mem);!function(t,n,e){const r=F[t.type];if(void 0===r)throw h("unexpected assignable type");r(t,n,e)}(t.assignable,e,n.mem),x(n.mem,e)},j[r.ValueStatement]=(t,n)=>{x(n.mem,C(t.value,n.mem))},j[r.SyntaxError]=(t,n)=>{throw a},j[r.IfStatement]=(t,n)=>{if(null===t.value)throw s;n.ifResult=k(C(t.value,n.mem))},j[r.ThenStatement]=(t,n)=>{throw a},j[r.ElseStatement]=(t,n)=>{if(0===n.blockStack.length)throw a;if(n.lines[n.blockStack.pop()].type!==r.ThenStatement)throw a;n.blockStack.push(n.i),n.falsyStackHeight=n.blockStack.length},j[r.ForLoop]=(t,n)=>{if(null===t.variable||null===t.start||null===t.end)throw s;T(n.mem,t.variable,C(t.start,n.mem)),n.blockStack.push(n.i),k(C(N(t.variable,"<=",t.end),n.mem))||(n.falsyStackHeight=n.blockStack.length)},j[r.WhileLoop]=(t,n)=>{if(null===t.value)throw s;n.blockStack.push(n.i),k(C(t.value,n.mem))||(n.falsyStackHeight=n.blockStack.length)},j[r.RepeatLoop]=(t,n)=>{if(null===t.value)throw s;n.blockStack.push(n.i)},j[r.EndStatement]=(t,n)=>{if(0===n.blockStack.length)throw a;const e=n.blockStack.pop(),u=n.lines[e];if(u.type===r.ForLoop||u.type===r.WhileLoop||u.type===r.RepeatLoop)u.type===r.ForLoop?(W(n.mem,u.variable,null!==u.step?u.step:b),k(C(N(u.variable,"<=",u.end),n.mem))&&(n.blockStack.push(e),n.i=e)):k(C(u.value,n.mem))&&(n.blockStack.push(e),n.i=e);else if(u.type!==r.ThenStatement&&u.type!==r.ElseStatement)throw h(`impossibleEndFrom'${u.type}`)},j[r.PauseStatement]=(t,n)=>{throw v},j[r.LabelStatement]=(t,n)=>{},j[r.GotoStatement]=(t,n)=>{n.searchLabel=t.location,n.i=-1},j[r.IncrementSkip]=(t,n)=>{if(null===t.variable||null===t.end)throw s;W(n.mem,t.variable,b),n.incrementDecrementResult=k(C(N(t.variable,"<=",t.end),n.mem))},j[r.DecrementSkip]=(t,n)=>{if(null===t.variable||null===t.end)throw s;W(n.mem,t.variable,y),n.incrementDecrementResult=k(C(N(t.variable,">=",t.end),n.mem))},j[r.MenuStatement]=(t,n)=>{if(null===t.title||0===t.choices.length||t.choices.length>7)throw s;return $(M(C(t.title,n.mem),!0),n.io),t.choices.forEach((t,e)=>{$(`${e+1}:${M(t.option)}`,n.io)}),Y(e=>{const r=function(t){if(null==t||""===t||t.length>1)return;const n=t.charCodeAt(0)-"0".charCodeAt(0);return n<0||n>9?void 0:n}(e);if(void 0===r||0===r||r>t.choices.length)return!0;n.searchLabel=t.choices[r-1].location,n.i=0,n.resume()},n.io),R},j[r.ProgramStatement]=(t,n)=>{throw v},j[r.ReturnStatement]=(t,n)=>E,j[r.StopStatement]=(t,n)=>E,j[r.DelVarStatement]=(t,n)=>{if(null===t.variable)throw s;!function(t,n){delete t.vars[n.name]}(n.mem,t.variable)},j[r.GraphStyleStatement]=(t,n)=>{throw v},j[r.OpenLibStatement]=(t,n)=>{throw v},j[r.ExecLibStatement]=(t,n)=>{throw v},j[r.Display]=(t,n)=>{null!==t.value&&$(M(C(t.value,n.mem)),n.io)},j[r.Input]=(t,n)=>{if(null===t.variable){if(null!==t.text)throw s;throw v}let e="?";return null!==t.text&&(e=M(C(t.text,n.mem),!0)),K(e,t.variable,n,!0)},j[r.Prompt]=(t,n)=>{if(null===t.variable)throw s;return K(`${function(t){let n=t.name;switch(t.type){case r.VARIABLE:case r.STRINGVARIABLE:break;case r.LISTVARIABLE:n=n.substring(4),t.custom||(n=`&L${n}`);break;default:throw h("unexpected variable tostring")}return n}(t.variable)}=?`,t.variable,n,!1)},j[r.DispGraph]=(t,n)=>{throw v},j[r.DispTable]=(t,n)=>{throw v},j[r.Output]=(t,n)=>{if(null===t.row||null===t.column||null===t.value)throw s;const e=C(t.row,n.mem),u=C(t.column,n.mem);if(e.type!==r.NUMBER||u.type!==r.NUMBER)throw i;if(e.float<1||e.float>n.rows||u.float<1||u.float>n.columns)throw m;$(M(C(t.value,n.mem)),n.io)},j[r.ClrHome]=(t,n)=>{throw v},j[r.ClrTable]=(t,n)=>{throw v},j[r.GetCalc]=(t,n)=>{throw v},j[r.Get]=(t,n)=>{throw v},j[r.Send]=(t,n)=>{throw v};const X="daemon-loop",_="daemon-exception",q=.001,Q={},Z=[];let z=!1,J=0;const tt=1e3,nt=document.createTextNode(null);function et(t){const n=new Event(t);nt.dispatchEvent(n)}function rt(){!1===z&&(z=!0,et("start"),window.postMessage(X,"*"))}function ut(t,n,e){const r=J++;return console.debug(`[Task ${r}] Start`),Q[r]={func:t,delay:Math.max(n,q),lastRun:void 0,runOnce:e,stopOnException:!0,suspended:!1},rt(),r}function ot(t){if(console.debug(`[Task ${t}] Suspend`),!(t in Q))throw new Error(`Error suspending: task '${t}' not found`);Q[t].suspended=!0}function it(t){console.debug(`[Task ${t}] Stop`),delete Q[t]}function at(t){!function(t){if(console.debug(`[Task ${t}] Resume`),!(t in Q))throw console.debug(Q),new Error(`Error resuming: task '${t}' not found`);Q[t].suspended=!1,rt()}(t)}window.addEventListener("message",(function(t){if(t.source!==window||t.data!==X)return;t.stopPropagation();const n=performance.now(),e=Object.keys(Q);let r=0,u=0;e.forEach(t=>{const e=Q[t];let o;if(!0===e.suspended)o=0,u+=1;else if(r+=1,void 0===e.lastRun||e.runOnce)o=1;else{const t=n-e.lastRun;o=Math.floor(t/e.delay)}o>0&&(e.lastRun=n);for(let n=0;n<o;n++){let n;try{n=e.func()}catch(t){n=L,Z.length<tt&&(Z.push(t),window.postMessage(_,"*"))}if(n===E||e.runOnce||e.stopOnException&&n===L){it(t),r-=1;break}if(n===R){ot(t),r-=1,u+=1;break}if(n===g)break}}),0===r?(z=!1,et(u>0?"suspend":"stop")):window.postMessage(X,"*")}),!0),window.addEventListener("message",(function(t){if(t.source===window&&t.data===_&&Z.length>0)throw Z.pop()}),!0);const ct=nt.addEventListener.bind(nt);nt.removeEventListener.bind(nt);function lt(t,n={}){let e=[];void 0!==n.source&&(e=Array.isArray(n.source)?n.source:n.source.split(/\r?\n/));let u=1;void 0!==n.frequencyMs&&(u=n.frequencyMs);const o={mem:{vars:{},ans:S()},resume:void 0,resumeCallback:void 0,debug:!0===n.debug,sourceLines:e,searchLabel:void 0,ifResult:void 0,incrementDecrementResult:void 0,maximumLines:50,linesRun:0,blockStack:[],falsyStackHeight:void 0,falsyBlockPreviousIf:void 0,i:0,lines:t,callback:n.callback,frequencyMs:u,status:"pending",rows:8,columns:16,io:{elem:n.elem,input:n.input,stdin:n.stdin,includeErrors:void 0===n.includeErrors||!0===n.includeErrors,includeLibErrors:void 0===n.includeLibErrors||!0===n.includeLibErrors,includeLineNumbers:void 0===n.includeLineNumbers||!0===n.includeLineNumbers,includeSource:void 0===n.includeSource||!0===n.includeSource}},i=(c=()=>(function(t){let n;try{t.status="running",n=function(t){if(t.debug&&console.debug({Line:t.i,searchLabel:t.searchLabel,ifResult:t.ifResult,blockStack:t.blockStack,falsyStackHeight:t.falsyStackHeight,falsyBlockPreviousIf:t.falsyBlockPreviousIf,source:t.source,mem:t.mem}),void 0!==t.resumeCallback&&(t.resumeCallback(),t.resumeCallback=void 0),t.i>=t.lines.length){if(void 0!==t.searchLabel)throw l;if(void 0!==t.ifResult||void 0!==t.incrementDecrementResult)throw a;return t.debug&&console.debug(t.mem),E}if(t.linesRun++,t.linesRun>=t.maximumLines)throw h("maxlines");const n=t.lines[t.i],e=n.type;if(void 0!==t.falsyStackHeight){const n=t.blockStack[t.blockStack.length-1],u=t.lines[n];return(e===r.EndStatement||e===r.ElseStatement&&u.type===r.ThenStatement)&&(t.blockStack.pop(),t.blockStack.length<t.falsyStackHeight&&(t.falsyStackHeight=void 0)),(e===r.ForLoop||e===r.RepeatLoop||e===r.WhileLoop||e===r.ThenStatement&&!0===t.falsyBlockPreviousIf||e===r.ElseStatement&&u.type===r.ThenStatement)&&t.blockStack.push(t.i),void(t.falsyBlockPreviousIf=e===r.IfStatement)}if(t.falsyBlockPreviousIf=void 0,void 0===t.searchLabel){if(void 0!==t.ifResult){const n=!0!==t.ifResult;if(t.ifResult=void 0,e===r.ThenStatement)return t.blockStack.push(t.i),void(n&&(t.falsyStackHeight=t.blockStack.length));if(n)return}if(void 0!==t.incrementDecrementResult){const n=!0!==t.incrementDecrementResult;if(t.incrementDecrementResult=void 0,n)return}if(!0===n.extra)throw a;if(!0===n.args)throw s;return function(t,n){const e=j[t.type];if(void 0===e)throw h("unexpected");return e(t,n)}(n,t)}e===r.LabelStatement&&n.location===t.searchLabel&&(t.searchLabel=void 0)}(t)}catch(e){if(t.status="faulted",void 0===e.type)throw e;if(t.i<t.lines.length&&!0!==e.hideSource){let n=t.lines[t.i].source;void 0!==t.sourceLines&&(n=t.sourceLines[t.i]),e.source={index:t.i,line:n}}!function(t,n={}){if(t.type===r.ti&&!n.includeErrors||t.type===r.lib&&!n.includeLibErrors)return void console.log(t);let e="";t.type===r.ti?e+="ERR:":t.type===r.lib?e+="Error: ":e+="Unexpected: ",e+=t.code,n.includeLineNumbers&&void 0!==t.source&&void 0!==t.source.index&&(e+=` on line ${t.source.index}`),n.includeSource&&void 0!==t.source&&void 0!==t.source.line&&(e+=` :${t.source.line}`),$(e,n)}(e,t.io),n=E}return n===E?("faulted"!==t.status&&(t.status="done"),void 0!==t.callback&&setTimeout(t.callback,0)):t.i+=1,n})(o),f=o.frequencyMs,ut(c,f));var c,f;return o.resume=t=>{o.resumeCallback=t,at(i)},{getStatus:()=>o.status,isActive:()=>"pending"===o.status||"running"===o.status,stop:()=>{!function(t={}){void 0!==t.input&&t.input.off("keypress")}(o.io),function(t){it(t)}(i)}}}e.d(n,"run",(function(){return lt})),e.d(n,"on",(function(){return ct})),e.d(n,"parse",(function(){return w}))}]);
//# sourceMappingURL=ti.js.map